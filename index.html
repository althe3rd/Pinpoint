<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinpoint Bookmarklet</title>
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192" href="favicon_io/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="favicon_io/android-chrome-512x512.png">
    <link rel="manifest" href="favicon_io/site.webmanifest">
    <link rel="shortcut icon" href="favicon_io/favicon.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            min-height: 100vh;
        }
        
        .header {
            background: #c5050c;
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-left: 4px solid #c5050c;
        }
        
        .card h2 {
            color: #c5050c;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .card h3 {
            color: #333;
            margin: 1.5rem 0 1rem 0;
            font-size: 1.2rem;
        }
        
        .bookmarklet-container {
            background: #f8f9fa;
            border: 2px dashed #c5050c;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }
        
        .bookmarklet {
            display: inline-block;
            background: #c5050c;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            cursor: grab;
            margin: 0.5rem;
        }
        
        .bookmarklet:hover {
            background: #a00408;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(197, 5, 12, 0.3);
        }
        
        .bookmarklet:active {
            cursor: grabbing;
        }
        
        .generate-btn {
            background: #115421;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }
        
        .generate-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }
        
        .instruction-list {
            background: #e3f2fd;
            border-radius: 6px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        
        .instruction-list ol {
            padding-left: 1.5rem;
        }
        
        .instruction-list li {
            margin-bottom: 0.8rem;
            font-weight: 500;
        }
        
        .alert {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .alert.info {
            background: #d1ecf1;
            border-color: #bee5eb;
            color: #0c5460;
        }
        
        .alert.success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .hidden {
            display: none;
        }
        
        .code-display {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 1rem;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9rem;
            margin: 1rem 0;
            word-break: break-all;
            max-height: 200px;
            overflow-y: auto;
        }

        .feature-highlight {
            background: #e8f5e8;
            border: 1px solid #c3e6cb;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .feature-highlight h4 {
            color: #155724;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Pinpoint</h1>
        <p>Digital Accessibility Testing Tool</p>
    </div>
    <main>
    <div class="container">
        <div class="card">
            <h2>About This Tool</h2>
            <p>Pinpoint is a bookmarklet powered by <strong>axe-core</strong>, the industry-standard accessibility testing engine. This tool provides comprehensive WCAG 2.1 AA compliance testing with a detailed sidebar showing violations, recommendations, and fix suggestions.</p>
            
            <!--<div class="feature-highlight">
                <h4>New Enhanced Features!</h4>
                <ul>
                    <li><strong>Accessibility Score:</strong> Get an instant 0-100 accessibility rating</li>
                    <li><strong>Detailed Technical Information:</strong> Color values, line numbers, and CSS selectors</li>
                    <li><strong>Expandable Details:</strong> Click "Show details" on any issue for in-depth information</li>
                    <li><strong>Visual Score Indicator:</strong> Color-coded circular progress indicator</li>
                </ul>
            </div>-->
            
            <div class="alert info">
                <strong>Powered by axe-core:</strong> Uses the same accessibility testing engine that powers popular tools throughout the industry, ensuring consistent and accurate results.
            </div>
        </div>
        
        <div class="card">
            <h2>Get Your Enhanced Bookmarklet</h2>
            
            <div class="bookmarklet-container">
                <h3>Option 1: Drag & Drop (Recommended)</h3>
                <p>Drag this button directly to your bookmarks bar:</p>
                <a href="#" id="bookmarklet-link" class="bookmarklet">Pinpoint A11y</a>
                <p style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">
                    Right-click and "Bookmark this link" if drag & drop doesn't work
                </p>
            </div>
            
            <div class="bookmarklet-container">
                <h3>Option 2: Copy & Paste</h3>
                <p>Generate the bookmarklet code to copy manually:</p>
                <button class="generate-btn" onclick="generateBookmarklet()">Generate Enhanced Bookmarklet Code</button>
                <div id="bookmarklet-code" class="code-display hidden"></div>
                <p style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">
                    Copy this code and paste it as the URL when creating a new bookmark
                </p>
            </div>
            
            <div class="instruction-list">
                <h3>Installation Steps:</h3>
                <ol>
                    <li><strong>Show bookmarks bar:</strong> Press <code>Ctrl+Shift+B</code> (Windows) or <code>Cmd+Shift+B</code> (Mac)</li>
                    <li><strong>Add bookmark:</strong> Either drag the button above OR copy the generated code and create a new bookmark</li>
                    <li><strong>Name it:</strong> "Pinpoint A11y Checker" when creating the bookmark</li>
                    <li><strong>Test it:</strong> Visit any webpage and click your new bookmark</li>
                </ol>
            </div>
            
            <div class="alert success">
                <strong>Ready to use!</strong> The enhanced bookmarklet now shows an accessibility score, detailed technical information, and improved issue analysis.
            </div>
        </div>
        
        <div class="card">
            <h2>What You'll Get</h2>
            <ul style="padding-left: 1.5rem; margin: 1rem 0;">
                <li><strong>Accessibility Score:</strong> 0-100 rating with color-coded visual indicator</li>
                <li><strong>Detailed Sidebar:</strong> Professional interface showing all accessibility issues</li>
                <li><strong>Technical Details:</strong> HTML source, line numbers, CSS selectors, and color information</li>
                <li><strong>Violations & Warnings:</strong> Clear categorization of must-fix issues vs. manual review items</li>
                <li><strong>Click-to-Highlight:</strong> Click any issue to highlight the problematic element on the page</li>
                <li><strong>Enhanced Color Information:</strong> See actual foreground/background colors and contrast ratios</li>
                <li><strong>Fix Recommendations:</strong> Specific guidance on how to resolve each issue</li>
                <li><strong>WCAG Compliance:</strong> Tests against WCAG 2.1 AA standards</li>
                <li><strong>Impact Levels:</strong> Issues categorized by severity (critical, serious, moderate, minor)</li>
                <li><strong>Learn More Links:</strong> Direct links to axe-core documentation for each rule</li>
            </ul>
        </div>
        
        <div class="card">
            <h2>For Local Development</h2>
            <div class="alert">
                <strong>Testing Locally?</strong> If you're testing on localhost or file:// URLs, the CDN version might not work due to CORS restrictions. For local development, consider setting up a local web server.
            </div>
            
            <p><strong>Quick local server options:</strong></p>
            <ul style="padding-left: 1.5rem; margin: 0.5rem 0;">
                <li>Python: <code>python -m http.server 8000</code></li>
                <li>Node.js: <code>npx http-server</code></li>
                <li>PHP: <code>php -S localhost:8000</code></li>
            </ul>
        </div>
        
        <div class="card">
            <h2>Best Practices</h2>
            <ul style="padding-left: 1.5rem;">
                <li>Run accessibility checks on all pages before publishing</li>
                <li>Aim for scores of 90+ for excellent accessibility</li>
                <li>Fix all violations and address manual review items</li>
                <li>Use the detailed technical information to understand issues better</li>
                <li>Test keyboard navigation manually</li>
                <li>Verify with screen readers when possible</li>
                <li>Remember: automated testing catches ~30% of issues - manual testing is still essential</li>
            </ul>
        </div>
    </div>
</main>
    <div class="footer">
        
        <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
            Powered by axe-core accessibility testing engine
        </p>
    </div>
    
    <script>
        // The enhanced bookmarklet code with scoring and detailed information
        const bookmarkletCode = `!function(){"use strict";window.uwAccessibilityChecker?window.uwAccessibilityChecker.remove():(window.uwAccessibilityChecker={version:"1.5.1",issues:[],axeLoaded:!1,checkedItems:new Set,isMinimized:!1,shadowRoot:null,heightPadding:35,scoreAnimationPlayed:!1,filters:{errors:!0,warnings:!0,info:!0},init:function(){this.setupShadowDOM(),this.checkForUpdates(),this.showLoadingPanel(),this.loadAxeCore()},setupShadowDOM:function(){const e=document.createElement("div");if(e.id="uw-a11y-container",document.body.appendChild(e),this.shadowRoot=e.attachShadow({mode:"open"}),!document.getElementById("uw-a11y-global-styles")){const e=document.createElement("style");e.id="uw-a11y-global-styles",e.textContent="\\n .uw-a11y-highlight {\\n background: yellow !important;\\n border: 2px solid red !important;\\n box-shadow: 0 0 0 2px yellow !important;\\n }\\n ",document.head.appendChild(e)}},showLoadingPanel:function(){this.shadowRoot.innerHTML=\`\\n \${this.getStyles()}\\n <div id="uw-a11y-panel">\\n <div id="uw-a11y-header">\\n <div class="uw-a11y-title-container">\\n <svg viewBox="0 0 404 404" fill="none" xmlns="http://www.w3.org/2000/svg" class="uw-a11y-logo">\\n <g filter="url(#filter0_d_1_19)">\\n <path fill-rule="evenodd" clip-rule="evenodd" d="M201 349C288.261 349 359 278.261 359 191C359 103.739 288.261 33 201 33C113.739 33 43 103.739 43 191C43 278.261 113.739 349 201 349ZM201 373C301.516 373 383 291.516 383 191C383 90.4842 301.516 9 201 9C100.484 9 19 90.4842 19 191C19 291.516 100.484 373 201 373Z" fill="url(#paint0_linear_1_19)"/>\\n </g>\\n <g filter="url(#filter1_d_1_19)">\\n <path fill-rule="evenodd" clip-rule="evenodd" d="M200.5 302C262.08 302 312 252.08 312 190.5C312 128.92 262.08 79 200.5 79C138.92 79 89 128.92 89 190.5C89 252.08 138.92 302 200.5 302ZM200.5 326C275.335 326 336 265.335 336 190.5C336 115.665 275.335 55 200.5 55C125.665 55 65 115.665 65 190.5C65 265.335 125.665 326 200.5 326Z" fill="url(#paint1_linear_1_19)"/>\\n </g>\\n <defs>\\n <filter id="filter0_d_1_19" x="0.4" y="0.4" width="403.2" height="403.2" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\\n <feFlood flood-opacity="0" result="BackgroundImageFix"/>\\n <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\\n <feOffset dx="1" dy="11"/>\\n <feGaussianBlur stdDeviation="9.8"/>\\n <feComposite in2="hardAlpha" operator="out"/>\\n <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>\\n <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_19"/>\\n <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_19" result="shape"/>\\n </filter>\\n <filter id="filter1_d_1_19" x="46.4" y="46.4" width="310.2" height="310.2" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\\n <feFlood flood-opacity="0" result="BackgroundImageFix"/>\\n <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\\n <feOffset dx="1" dy="11"/>\\n <feGaussianBlur stdDeviation="9.8"/>\\n <feComposite in2="hardAlpha" operator="out"/>\\n <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>\\n <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_19"/>\\n <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_19" result="shape"/>\\n </filter>\\n <linearGradient id="paint0_linear_1_19" x1="78.7712" y1="51.9816" x2="324.572" y2="313.9" gradientUnits="userSpaceOnUse">\\n <stop stop-color="#35CD9C"/>\\n <stop offset="0.465" stop-color="#43FFFC"/>\\n <stop offset="0.545" stop-color="#C2F6F9"/>\\n <stop offset="1" stop-color="#33BFF1"/>\\n </linearGradient>\\n <linearGradient id="paint1_linear_1_19" x1="109.5" y1="87" x2="292.5" y2="282" gradientUnits="userSpaceOnUse">\\n <stop stop-color="#35CD9C"/>\\n <stop offset="0.465" stop-color="#43FFFC"/>\\n <stop offset="0.545" stop-color="#C2F6F9"/>\\n <stop offset="1" stop-color="#33BFF1"/>\\n </linearGradient>\\n </defs>\\n </svg>\\n <h2 id="uw-a11y-title">Pinpoint Accessibility Checker</h2>\\n </div>\\n <button id="uw-a11y-close">✕</button>\\n </div>\\n <div id="uw-a11y-content">\\n <div style="text-align: center; padding: 2rem;">\\n <div class="uw-a11y-spinner"></div>\\n <p style="margin-top: 1rem;">Loading axe-core accessibility engine...</p>\\n <p style="font-size: 0.9rem; color: #666;">This may take a few seconds on first use.</p>\\n </div>\\n </div>\\n </div>\\n \`,this.shadowRoot.getElementById("uw-a11y-close").onclick=()=>this.remove()},loadAxeCore:function(){if(window.axe)return this.axeLoaded=!0,void this.runAxeChecks();const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/axe-core@4.10.3/axe.min.js",e.onload=()=>{this.axeLoaded=!0,this.runAxeChecks()},e.onerror=()=>{this.showError("Failed to load axe-core. Please check your internet connection and try again.")},document.head.appendChild(e)},runAxeChecks:function(){if(!window.axe)return void this.showError("axe-core failed to load properly.");const{wcagSpec:e,wcagLevel:t}=this.getSelectedWcag(),n=this.buildWcagTags(e,t),i={rules:{region:{enabled:!1},"color-contrast-enhanced":{enabled:"AAA"===(t||"").toUpperCase()}},runOnly:{type:"tag",values:n}},a={exclude:this.getEffectiveExcludeSelectors()};window.axe.run(a,i,(e,t)=>{if(e)this.showError("Error running accessibility analysis: "+e.message);else{this.processAxeResults(t);try{this.isBestPracticesEnabled()&&this.runBestPracticeChecks()}catch(e){console.warn("Best-practices scan failed:",e)}this.displayResults()}})},runBestPracticeChecks:function(){const e=e=>{if(!e)return"";const t=e.getAttribute&&e.getAttribute("aria-label");if(t&&t.trim())return t.trim();const n=e.getAttribute&&e.getAttribute("aria-labelledby");if(n){const e=n.split(/\\s+/).map(e=>{const t=document.getElementById(e);return t?(t.innerText||t.textContent||"").trim():""}).join(" ").trim();if(e)return e}const i=e.querySelector&&e.querySelector("img[alt]");if(i&&i.getAttribute("alt")&&i.getAttribute("alt").trim())return i.getAttribute("alt").trim();if("INPUT"===e.tagName){const t=(e.getAttribute("type")||"").toLowerCase(),n=e.getAttribute("value");if(n&&n.trim()&&["button","submit","reset"].includes(t))return n.trim()}return(e.innerText||e.textContent||"").replace(/\\s+/g," ").trim()},t=e=>{try{if(!(e&&e instanceof Element))return!1;if(e.hidden)return!1;const t=window.getComputedStyle(e);return!(!t||"none"===t.display||"hidden"===t.visibility||0===parseFloat(t.opacity))&&((!e.closest||!e.closest("#uw-a11y-container"))&&(!this.shouldExcludeElement||!this.shouldExcludeElement(e)))}catch(e){return!0}},n=["click here","here","learn more","read more","more","details","this","this link","continue","link","info"],i=Array.from(document.querySelectorAll("a[href]"));i.forEach(i=>{if(!t(i))return;const a=e(i).toLowerCase();if(!a)return;n.includes(a)&&this.addIssue("info","Best Practice: Use contextual link text",\`The link text "\${a}" is not descriptive out of context.\`,i,"Use meaningful, specific link text that communicates the destination or action. For example, instead of <code>click here</code>, use <code>Download annual report (PDF)</code> or <code>Read more about financial aid</code>. You can also add context with <code>aria-label</code> when needed.","https://www.w3.org/WAI/GL/UNDERSTANDING-WCAG20/navigation-mechanisms-meaningful-sequence.html","minor",["best-practice","links"],[{label:"Detected Text",value:a},{label:"Href",value:i.getAttribute("href")||""}],"bp-contextual-link-text")});const a=new Map;i.forEach(i=>{if(!t(i))return;const o=e(i).toLowerCase();if(!n.includes(o))return;const s=(i.getAttribute("href")||"").trim();a.has(o)||a.set(o,new Set),a.get(o).add(s)}),a.forEach((t,a)=>{if(t.size>1){const o=i.filter(t=>n.includes(e(t).toLowerCase())).slice(0,3).map(t=>({text:e(t),href:t.getAttribute("href")||""}));this.addIssue("info","Best Practice: Avoid repeated generic links",\`Found multiple "\${a}" links pointing to different destinations.\`,null,"Provide unique, contextual link text for each destination. For example, replace repeated <code>Read more</code> with <code>Read more about scholarships</code>, <code>Read more about housing</code>, etc.","https://www.w3.org/WAI/tutorials/page-structure/links/","minor",["best-practice","links"],[{label:"Link Text",value:a},{label:"Unique Destinations",value:Array.from(t).join(", ")},{label:"Examples (first 3)",value:o.map(e=>\`\${e.text} → \${e.href}\`).join(" | ")}],"bp-duplicate-generic-links")}}),i.forEach(n=>{if(!t(n))return;const i=n.getAttribute("target");if(i&&"_blank"===i.toLowerCase()){const t=e(n),i=t.toLowerCase(),a=i.includes("opens in new tab")||i.includes("opens in a new tab")||i.includes("(new tab)"),o=(n.getAttribute("rel")||"").toLowerCase(),s=o.includes("noopener"),r=o.includes("noreferrer");if(!a||!s||!r){const e=[];a||e.push('Inform users the link opens in a new tab/window (e.g., include visually hidden text like <code><span class="sr-only">(opens in new tab)</span></code> or add to <code>aria-label</code>).'),s&&r||e.push('Add <code>rel="noopener noreferrer"</code> for security and privacy.'),this.addIssue("info","Best Practice: Communicate new-tab behavior","Link opens in a new tab/window but may not communicate this behavior or include recommended rel attributes.",n,e.join(" "),"https://www.w3.org/TR/WCAG20-TECHS/G201.html","minor",["best-practice","links"],[{label:"Text",value:t},{label:"Href",value:n.getAttribute("href")||""},{label:"Has rel",value:o||"(none)"}],"bp-new-tab-communication")}}});const o=Array.from(document.querySelectorAll("input, textarea, select")).filter(e=>"hidden"!==(e.getAttribute("type")||"").toLowerCase());o.forEach(e=>{if(!t(e))return;e.hasAttribute("placeholder")&&e.getAttribute("placeholder").trim()&&!(e=>{if(!(e&&e instanceof Element))return!1;if(e.closest("label"))return!0;const t=e.getAttribute("id");if(t&&document.querySelector(\`label[for="\${CSS.escape(t)}"]\`))return!0;if(e.hasAttribute("aria-label")&&e.getAttribute("aria-label").trim())return!0;if(e.hasAttribute("aria-labelledby")&&e.getAttribute("aria-labelledby").split(/\\s+/).map(e=>document.getElementById(e)).filter(Boolean).map(e=>(e.innerText||e.textContent||"").trim()).join(" ").trim())return!0;return!1})(e)&&this.addIssue("info","Best Practice: Don't rely on placeholder as label","This form control appears to rely on placeholder text instead of a persistent label.",e,"Provide a visible, persistent <code><label></code> or an accessible name via <code>aria-label</code>/<code>aria-labelledby</code>. Placeholders should be hints, not primary labels, because they disappear on input and can reduce readability.","https://www.w3.org/WAI/tutorials/forms/labels/","minor",["best-practice","forms"],[{label:"Control",value:e.tagName.toLowerCase()+(e.getAttribute("type")?\` [type=\${e.getAttribute("type")}]\`:"")},{label:"Placeholder",value:e.getAttribute("placeholder")||""}],"bp-placeholder-only-label")});const s=Array.from(document.querySelectorAll('button, input[type="button"], input[type="submit"], input[type="reset"], a[role="button"]')),r=["submit","go","more","learn more","read more","click here","ok","yes","no","continue","next","previous","prev","send"];s.forEach(n=>{if(!t(n))return;const i=e(n).trim();i&&r.includes(i.toLowerCase())&&this.addIssue("info","Best Practice: Make button text specific",\`The button label "\${i}" is generic and may be unclear.\`,n,"Use specific labels that describe the action, e.g., <code>Submit application</code>, <code>Search site</code>, or <code>Download report</code>.","https://www.w3.org/WAI/tutorials/forms/labels/#hints-and-instructions","minor",["best-practice","buttons"],[{label:"Detected Text",value:i}],"bp-generic-button-text")});Array.from(document.querySelectorAll("video[autoplay], audio[autoplay]")).forEach(e=>{if(!t(e))return;const n=e.hasAttribute("controls"),i=e.hasAttribute("muted"),a=e.tagName.toLowerCase(),o=[];n||o.push("Add <code>controls</code> so users can pause/stop."),i||"VIDEO"!==e.tagName||o.push("Avoid autoplay with sound; consider starting paused or muted."),o.push("Respect user preference with <code>@media (prefers-reduced-motion: reduce)</code> and avoid distracting motion."),this.addIssue("info","Best Practice: Avoid autoplay without clear controls",\`\${a} element autoplays. Autoplay can be disorienting and should generally be avoided.\`,e,o.join(" "),"https://www.w3.org/WAI/WCAG21/Techniques/general/G19","minor",["best-practice","media"],[{label:"Element",value:\`<\${a}>\`},{label:"Controls",value:n?"present":"missing"}],"bp-media-autoplay")});Array.from(document.querySelectorAll("marquee, blink")).forEach(e=>{t(e)&&this.addIssue("info","Best Practice: Avoid marquee/blink effects","Elements using marquee/blink effects can be distracting and hard to read.",e,"Replace with non-moving alternatives or provide user controls and respect <code>prefers-reduced-motion</code>.","https://www.w3.org/WAI/WCAG21/Understanding/pause-stop-hide.html","minor",["best-practice","motion"],[],"bp-marquee-blink")});try{const e=Array.from(document.querySelectorAll("*"));e.length>2500||e.forEach(e=>{if(!t(e))return;const n=getComputedStyle(e);if(!n)return;const i=(n.animationDuration||"").split(",").map(e=>(e||"").trim()),a=(n.animationIterationCount||"").split(",").map(e=>(e||"").trim()),o=(n.animationPlayState||"").split(",").some(e=>"running"===e.trim()),s=i.some(e=>e&&"0s"!==e&&"0ms"!==e),r=a.some(e=>"infinite"===e);o&&s&&r&&this.addIssue("info","Best Practice: Provide motion alternatives","Detected an element with continuous animation.",e,"Offer a way to pause/stop animation and respect <code>prefers-reduced-motion</code> to reduce or remove motion for users who prefer it.","https://www.w3.org/WAI/WCAG21/Understanding/animation-from-interactions.html","minor",["best-practice","motion"],[],"bp-infinite-animation")})}catch(e){}const l=[".pdf",".doc",".docx",".ppt",".pptx",".xls",".xlsx",".zip"];i.forEach(n=>{if(!t(n))return;const i=(n.getAttribute("href")||"").toLowerCase(),a=e(n).toLowerCase(),o=l.find(e=>i.endsWith(e));o&&a&&!a.includes(o.replace(".",""))&&this.addIssue("info","Best Practice: Indicate file type in link",\`This link points to a \${o.toUpperCase()} file, but the link text may not indicate the file type.\`,n,"Include the file type (and optionally size) in the link text, e.g., <code>Annual Report (PDF)</code>.","https://www.w3.org/WAI/tips/writing/#inform-users-about-what-to-expect","minor",["best-practice","links"],[{label:"Href",value:i}],"bp-filetype-link-label")})},processAxeResults:function(e){this.issues=[],this.loadCheckedItems(),e.violations.forEach(e=>{e.nodes.forEach(t=>{this.isOwnUIElement(t)||this.addIssue("error",e.description,this.buildDescription(e,t),this.getElementFromNode(t),this.buildRecommendation(e,t,"error"),e.helpUrl,e.impact||"serious",e.tags,this.buildDetailedInfo(e,t),e.id)})}),e.incomplete.forEach((e,t)=>{e.nodes.forEach((n,i)=>{if(this.isOwnUIElement(n))return;const a=\`incomplete-\${t}-\${i}\`;this.addIssue("warning",e.description,"Manual review needed: "+this.buildDescription(e,n),this.getElementFromNode(n),this.buildRecommendation(e,n,"warning"),e.helpUrl,e.impact||"moderate",e.tags,this.buildDetailedInfo(e,n),e.id),this.issues[this.issues.length-1].uniqueId=a})}),this.originalAxeResults=e;const t={...e,violations:e.violations.map(e=>({...e,nodes:e.nodes.filter(e=>!this.isOwnUIElement(e))})).filter(e=>e.nodes.length>0),incomplete:e.incomplete.map(e=>({...e,nodes:e.nodes.filter(e=>!this.isOwnUIElement(e))})).filter(e=>e.nodes.length>0)};this.axeResults={url:e.url,timestamp:e.timestamp,toolOptions:e.toolOptions,violations:t.violations.length,passes:e.passes.length,incomplete:t.incomplete.length,inapplicable:e.inapplicable.length,score:this.calculateAccessibilityScore(t)},this.filteredAxeResults=t},buildDescription:function(e,t){let n=e.help||e.description;return t.failureSummary&&(n+="\\n\\nDetails: "+t.failureSummary),t.html&&(n+="\\n\\nElement: "+t.html.substring(0,100),t.html.length>100&&(n+="...")),n},buildRecommendation:function(e,t,n="error"){const i=e.id;let a="";if("warning"===n){const n=this.getManualReviewRecommendations();if(n[i]){const o=n[i];a="function"==typeof o?o(t,e):o}else{a=(0,n.default)(t,e)}}else{const n=this.getActionableRecommendations();if(n[i]){const o=n[i];a="function"==typeof o?o(t,e):o}else a=e.help||"Please refer to the help documentation for specific guidance on fixing this issue."}return this.formatRecommendation(a)},formatRecommendation:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},escapeHtmlAttribute:function(e){return e?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},escapeHtmlContent:function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},sanitizeHtmlId:function(e){return e?e.replace(/[^a-zA-Z0-9\\-_:.]/g,"-"):""},escapeJavaScript:function(e){return e?e.replace(/\\\\/g,"\\\\\\\\").replace(/'/g,"\\\\'").replace(/"/g,'\\\\"').replace(/\\n/g,"\\\\n").replace(/\\r/g,"\\\\r").replace(/\\t/g,"\\\\t"):""},escapeUrl:function(e){if(!e)return"";try{const t=new URL(e);return"http:"!==t.protocol&&"https:"!==t.protocol?"":this.escapeHtmlAttribute(e)}catch(e){return""}},getManualReviewRecommendations:function(){return{"color-contrast":()=>"Manually verify the contrast meets WCAG standards. Use a contrast checker tool or browser extension to measure the exact ratio. For normal text, ensure at least 4.5:1 ratio; for large text (18pt+ or 14pt+ bold), ensure at least 3:1 ratio.","color-contrast-enhanced":()=>"Check if enhanced AAA contrast is needed for this content. Verify if 7:1 ratio for normal text or 4.5:1 for large text is required based on your accessibility requirements.","audio-caption":()=>"Listen to the audio content and verify: 1) Does it contain speech or important audio information? 2) Are captions or transcripts provided if needed? 3) Are any captions accurate and properly synchronized?","video-caption":()=>"Watch the video content and verify: 1) Does it contain speech or important audio? 2) Are captions provided for all speech and sound effects? 3) Are captions accurate, synchronized, and properly formatted?","link-in-text-block":()=>"Check if this link is distinguishable from surrounding text without relying on color alone. Verify there are visual indicators like underlines, different font weight, or other styling that works for colorblind users.","identical-links-same-purpose":()=>"Review these links with identical text and verify they serve the same purpose or lead to the same destination. If they serve different purposes, make the link text more descriptive to differentiate them.","hidden-content":()=>"Verify this hidden content is appropriately hidden and still accessible to screen readers when needed. Check that important information isn't hidden from all users unintentionally.","aria-hidden-focus":()=>'Check if this focusable element with aria-hidden="true" is intentionally hidden from screen readers. Verify this doesn\\'t hide important interactive content from assistive technologies.',"nested-interactive":()=>"Test this interactive element with keyboard navigation and screen readers. Verify all functionality is accessible and the focus order makes sense to users.","landmark-unique":()=>"Review if multiple landmarks of the same type need distinguishing labels. Consider adding aria-label or aria-labelledby if users would benefit from clearer landmark identification.","heading-structure":()=>"Review the heading structure for logical flow. Verify headings accurately describe the content hierarchy and help users navigate and understand the page structure.",default:()=>"Manually verify this element meets accessibility requirements. Review the content, test with assistive technologies if possible, and ensure it provides equivalent access for all users."}},getActionableRecommendations:function(){return{"image-alt":e=>{const t=this.getElementFromNode(e);return t&&"IMG"===t.tagName?t.src&&t.src.includes("decorative")||"presentation"===t.getAttribute("role")?'Add alt="" for decorative images, or add role="presentation" if the image is purely decorative.':'Add descriptive alt text: <img src="..." alt="Brief description...">. Describe the content and function, not just "image of..."':"Add appropriate alt text describing the image content and purpose."},"image-redundant-alt":'Remove redundant words like "image of", "picture of", "graphic of" from alt text. Just describe what the image shows: alt="Red sports car" instead of alt="Image of a red sports car"',label:e=>{const t=this.getElementFromNode(e);if(t){const e=t.id||"unique-id",n=t.type||"text";return\`Add a label: <label for="\${e}">Field Name</label><input type="\${n}" id="\${e}"> OR use aria-label: <input type="\${n}" aria-label="Field Name">\`}return"Associate each form control with a descriptive label using <label> or aria-label."},"button-name":e=>{const t=this.getElementFromNode(e);return t?""===t.innerHTML.trim()?'Add text content inside the button: <button>Submit Form</button> OR add aria-label: <button aria-label="Submit form">👍</button>':"Ensure button has accessible text via text content, aria-label, or aria-labelledby.":"Buttons need accessible names - add text content or aria-label."},"duplicate-id":"Make each ID unique. Find duplicate IDs in your HTML and rename them. Each ID must be used only once per page.","color-contrast":e=>{const t=this.extractColorContrastInfo(e);return t?\`Current contrast is \${t.contrast} or may be difficult to determine due to the use of a gradient or image background. WCAG AA requires 4.5:1 for normal text, 3:1 for large text (18pt+ or 14pt+ bold).\`:"Improve text contrast ratio. Use darker text on light backgrounds or lighter text on dark backgrounds."},"link-name":'Make link text descriptive. Instead of "click here" or "read more", use "Download annual report" or "Read more about accessibility testing". The link text should make sense out of context.',"link-in-text-block":"Links in text need visual distinction beyond color alone. Add underlines, bold text, or other visual indicators that work for colorblind users.","heading-order":e=>{const t=this.getElementFromNode(e);if(t){const e=parseInt(t.tagName.charAt(1));return\`Fix heading sequence - don't skip levels. After H\${e-2}, use H\${e-1}, not H\${e}. Structure should be H1→H2→H3, not H1→H3.\`}return"Use headings in sequential order (H1, H2, H3...) without skipping levels. Think of headings as a document outline."},"empty-heading":"Add meaningful text inside headings. Remove empty headings or add descriptive content: <h2>Our Services</h2>","aria-allowed-attr":"Remove unsupported ARIA attributes from this element type. Check the ARIA specification for which attributes are valid for each element.","aria-required-attr":'Add required ARIA attributes. For example, role="button" needs aria-label or text content. Check ARIA patterns for required attributes.',"aria-valid-attr-value":'Fix ARIA attribute values. Use valid values like aria-expanded="true" or "false", not "yes" or other invalid values.',"button-name":"Add accessible name to button using text content, aria-label, or aria-labelledby.","table-fake-caption":"Use proper <caption> element instead of fake caption. Move the caption text inside: <table><caption>Sales Data 2024</caption><tr>...</table>","td-headers-attr":'Add headers attribute to complex table cells: <td headers="row1 col2">Data</td> where "row1 col2" are IDs of header cells.',"th-has-data-cells":"Ensure table headers (th) actually relate to data cells. Remove empty or irrelevant header cells.",region:'Add landmark regions using HTML5 elements: <main>, <nav>, <aside>, <header>, <footer>. OR use ARIA: <div role="main">, <div role="navigation">.',"page-has-heading-one":"Add exactly one H1 heading per page. The H1 should describe the main content: <h1>Page Title</h1>","landmark-one-main":'Add one <main> element per page: <main>\\x3c!-- main content here --\\x3e</main> OR <div role="main">',list:"Use proper list markup. Wrap list items in <ul> or <ol>: <ul><li>Item 1</li><li>Item 2</li></ul>","definition-list":"Use proper definition list structure: <dl><dt>Term</dt><dd>Definition</dd></dl>","focus-order-semantics":"Use semantic HTML elements (button, a, input) instead of div/span with click handlers. This ensures proper keyboard focus order.",tabindex:'Remove positive tabindex values (tabindex="1", "2", etc). Use tabindex="0" to make elements focusable or tabindex="-1" to remove from tab order.',"html-has-lang":'Add language attribute to html element: <html lang="en"> or <html lang="es"> for Spanish, etc.',"html-lang-valid":'Use valid language code. Examples: "en" for English, "es" for Spanish, "fr" for French. Use format like "en-US" for regional variants.',"audio-caption":"Add captions to audio content using <track> element with captions file, or provide transcript nearby.","video-caption":'Add captions: <video><track kind="captions" src="captions.vtt" srclang="en" label="English"></video>',"meta-refresh":'Remove auto-refresh meta tags. Use JavaScript with user control: <button onclick="refresh()">Refresh Page</button>',"meta-viewport":'Add viewport meta tag: <meta name="viewport" content="width=device-width, initial-scale=1.0">',"duplicate-id-active":"Remove duplicate IDs from interactive elements. Each ID must be unique across the entire page.","duplicate-id-aria":"Fix duplicate IDs used in ARIA relationships (aria-labelledby, aria-describedby). Each referenced ID must be unique.","frame-title":'Add descriptive title to iframe: <iframe title="Customer feedback form" src="..."></iframe>',"object-alt":'Add alternative text to object elements: <object data="chart.svg" type="image/svg+xml">Sales chart showing 20% increase</object>',"scope-attr-valid":'Use valid scope attribute values on table headers: scope="col" for column headers, scope="row" for row headers.',"skip-link":'Add skip navigation link at page start: <a href="#main" class="skip-link">Skip to main content</a>',"css-orientation-lock":"Don't lock orientation in CSS. Remove or modify CSS that prevents rotation: transform: rotate() or orientation locks."}},getElementFromNode:function(e){if(e.target&&e.target.length>0)try{return document.querySelector(e.target[0])}catch(e){return null}return null},isOwnUIElement:function(e){if(e.target&&e.target[0]){const t=e.target[0];if(t.includes("#uw-a11y-container")||t.includes("#uw-a11y-panel")||t.includes("uw-a11y-"))return!0}if(e.html&&(e.html.includes("uw-a11y-")||e.html.includes('id="uw-a11y-')||e.html.includes('class="uw-a11y-')||e.html.includes("Loading axe-core")||e.html.includes("Pinpoint Accessibility Checker")))return!0;const t=this.getElementFromNode(e);if(t){const e=document.getElementById("uw-a11y-container"),n=document.getElementById("uw-a11y-panel");if(e&&(t===e||e.contains(t)))return!0;if(n&&(t===n||n.contains(t)))return!0;if(t.className&&"string"==typeof t.className&&t.className.includes("uw-a11y-"))return!0;if(t.id&&t.id.includes("uw-a11y-"))return!0;if(t.getRootNode&&t.getRootNode()!==document){const e=t.getRootNode();if(e.host&&"uw-a11y-container"===e.host.id)return!0}}return!1},buildDetailedInfo:function(e,t){const n=[];if(t.html){n.push({type:"html",label:"HTML Source",value:t.html});const e=this.estimateLineNumber(t.html);e>0&&n.push({type:"line",label:"Approximate Line",value:e})}if(t.target&&t.target[0]&&n.push({type:"selector",label:"CSS Selector",value:t.target[0]}),"color-contrast"===e.id){const e=this.extractColorContrastInfo(t);e&&n.push({type:"colors",label:"Color Information",value:e})}if((e.id.includes("landmark")||e.id.includes("region"))&&n.push({type:"landmarks",label:"Landmark Context",value:this.analyzeLandmarkContext(t)}),e.id.includes("heading")&&n.push({type:"headings",label:"Heading Structure",value:this.analyzeHeadingStructure(t)}),t.failureSummary&&n.push({type:"failure",label:"Technical Details",value:t.failureSummary}),t.any&&t.any.length>0){const e=t.any.map(e=>e.message||e.id).filter(Boolean);e.length>0&&n.push({type:"checks",label:"Failed Checks",value:e.join(", ")})}return n},estimateLineNumber:function(e){try{const t=document.documentElement.outerHTML,n=t.indexOf(e.substring(0,50));if(n>-1){return t.substring(0,n).split("\\n").length}}catch(e){}return 0},extractColorContrastInfo:function(e){try{const t=this.getElementFromNode(e);if(!t)return null;const n=window.getComputedStyle(t);let i=n.color,a=n.backgroundColor;if(!a||"transparent"===a||"rgba(0, 0, 0, 0)"===a||a.includes("rgba(0, 0, 0, 0)")){let e=t.parentElement;for(;e&&e!==document.body;){const t=window.getComputedStyle(e).backgroundColor;if(t&&"transparent"!==t&&"rgba(0, 0, 0, 0)"!==t&&!t.includes("rgba(0, 0, 0, 0)")){a=t;break}e=e.parentElement}a&&"transparent"!==a&&"rgba(0, 0, 0, 0)"!==a&&!a.includes("rgba(0, 0, 0, 0)")||(a="#ffffff")}const o=this.calculateContrastRatio(i,a);return{foreground:i,background:a,contrast:o?o.toFixed(2)+":1":"Unable to calculate",required:"WCAG AA requires 4.5:1 for normal text, 3:1 for large text"}}catch(e){return console.warn("Error extracting color contrast info:",e),null}},calculateContrastRatio:function(e,t){try{const n=this.getLuminance(e),i=this.getLuminance(t);if(null===n||null===i)return console.warn("Could not calculate luminance for colors:",e,t),null;const a=Math.max(n,i),o=(a+.05)/(Math.min(n,i)+.05);return isNaN(o)||!isFinite(o)?(console.warn("Invalid contrast ratio calculated for colors:",e,t),null):o}catch(e){return console.warn("Error calculating contrast ratio:",e),null}},getLuminance:function(e){try{let t,n,i;if(e.startsWith("#")){const a=e.slice(1);if(3===a.length)t=parseInt(a[0]+a[0],16),n=parseInt(a[1]+a[1],16),i=parseInt(a[2]+a[2],16);else{if(6!==a.length)return null;t=parseInt(a.slice(0,2),16),n=parseInt(a.slice(2,4),16),i=parseInt(a.slice(4,6),16)}}else if(e.startsWith("rgb")){const a=e.match(/\\d+/g);if(!a||3>a.length)return null;t=parseInt(a[0]),n=parseInt(a[1]),i=parseInt(a[2])}else{const a={white:[255,255,255],black:[0,0,0],red:[255,0,0],green:[0,128,0],blue:[0,0,255],yellow:[255,255,0],cyan:[0,255,255],magenta:[255,0,255],silver:[192,192,192],gray:[128,128,128],grey:[128,128,128]},o=e.toLowerCase().trim();if(!a[o])return null;[t,n,i]=a[o]}const a=e=>(e/=255)>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92,o=a(t),s=a(n);return.2126*o+.7152*s+.0722*a(i)}catch(t){return console.warn("Error calculating luminance for color:",e,t),null}},analyzeLandmarkContext:function(e){try{const t=this.getElementFromNode(e);if(!t)return"Element not found";return\`Found \${document.querySelectorAll('main, nav, header, footer, aside, section[aria-label], section[aria-labelledby], [role="banner"], [role="navigation"], [role="main"], [role="contentinfo"], [role="complementary"]').length} landmarks on page. Current element: \${t.tagName.toLowerCase()}\${t.getAttribute("role")?' (role="'+t.getAttribute("role")+'")':""}\`}catch(e){return"Unable to analyze landmark context"}},analyzeHeadingStructure:function(e){try{const t=this.getElementFromNode(e);if(!t)return"Element not found";const n=Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6")),i=n.indexOf(t),a=parseInt(t.tagName.charAt(1));let o=\`Current: \${t.tagName} "\${t.textContent.substring(0,50)}"\`;if(i>0){const e=n[i-1],t=parseInt(e.tagName.charAt(1));o+=\`\\nPrevious: \${e.tagName} (level \${t})\`,a>t+1&&(o+=\`\\nIssue: Skipped from H\${t} to H\${a}\`)}return o}catch(e){return"Unable to analyze heading structure"}},calculateAccessibilityScore:function(e){const t={critical:10,serious:7,moderate:3,minor:1};let n=0,i=e.passes.length+e.violations.length+e.incomplete.length;e.violations.forEach(e=>{n+=e.nodes.length*(t[e.impact]||t.moderate)});let a=0,o=0,s=0;if(e.incomplete.forEach((e,n)=>{e.nodes.forEach((i,r)=>{o++;const l=\`incomplete-\${n}-\${r}\`,c=this.isRuleVerified(e.id);if(this.checkedItems&&this.checkedItems.has(l)||c)s++;else{a+=.5*(t[e.impact]||t.moderate)}})}),n+=a,0===i)return{score:100,deductions:0,maxPossible:0,verifiedCount:0,totalManualReview:0};if(0===n)return{score:100,deductions:0,maxPossible:i*t.critical,verifiedCount:s,totalManualReview:o,details:{violations:e.violations.length,incomplete:e.incomplete.length,passes:e.passes.length}};const r=i*t.critical;return{score:Math.max(0,Math.round(100-n/r*100)),deductions:n,maxPossible:r,verifiedCount:s,totalManualReview:o,details:{violations:e.violations.length,incomplete:e.incomplete.length,passes:e.passes.length}}},showError:function(e){const t=document.getElementById("uw-a11y-panel");if(t){t.querySelector("#uw-a11y-content").innerHTML=\`\\n <div class="uw-a11y-issue error" style="margin: 1rem;">\\n <h4>Error Loading Accessibility Checker</h4>\\n <p>\${e}</p>\\n <p><strong>Suggestions:</strong></p>\\n <ul>\\n <li>Check your internet connection</li>\\n <li>Try refreshing the page and running the bookmarklet again</li>\\n <li>Ensure your browser allows loading external scripts</li>\\n </ul>\\n </div>\\n \`}},createPanel:function(){this.shadowRoot.innerHTML=\`\\n \${this.getStyles()}\\n <div id="uw-a11y-wrapper">\\n <div id="uw-a11y-nav">\\n <nav>\\n <ul>\\n <li>\\n <a id="uw-a11y-nav-results" href="#uw-a11y-view-results" title="Results">\\n <svg class="feather feather-pie-chart" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>\\n <span class="uw-a11y-nav-label">Results</span>\\n </a>\\n </li>\\n <li>\\n <a id="uw-a11y-nav-settings" href="#uw-a11y-view-settings" title="Settings">\\n <svg class="feather feather-toggle-left" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><rect height="14" rx="7" ry="7" width="22" x="1" y="5"/><circle cx="8" cy="12" r="3"/></svg>\\n <span class="uw-a11y-nav-label">Settings</span>\\n </a>\\n </li>\\n <li>\\n <a id="uw-a11y-nav-help" href="#uw-a11y-view-help" title="Help">\\n <svg class="feather feather-alert-triangle" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></svg>\\n <span class="uw-a11y-nav-label">Help</span>\\n </a>\\n </li>\\n <li>\\n <a id="uw-a11y-nav-about" href="#uw-a11y-view-about" title="About">\\n <svg class="feather feather-info" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="16" y2="12"/><line x1="12" x2="12.01" y1="8" y2="8"/></svg>\\n <span class="uw-a11y-nav-label">About</span>\\n </a>\\n </li>\\n </ul>\\n </nav>\\n </div>\\n <div id="uw-a11y-panel" tabindex="-1" role="dialog" aria-labelledby="uw-a11y-title">\\n <div class="accentcolors">\\n <div class="color1"></div>\\n <div class="color2"></div>\\n <div class="color3"></div>\\n </div>\\n <div id="uw-a11y-header">\\n <div class="uw-a11y-title-container">\\n <svg viewBox="0 0 404 404" fill="none" xmlns="http://www.w3.org/2000/svg" class="uw-a11y-logo">\\n <g filter="url(#filter0_d_1_19)">\\n <path fill-rule="evenodd" clip-rule="evenodd" d="M201 349C288.261 349 359 278.261 359 191C359 103.739 288.261 33 201 33C113.739 33 43 103.739 43 191C43 278.261 113.739 349 201 349ZM201 373C301.516 373 383 291.516 383 191C383 90.4842 301.516 9 201 9C100.484 9 19 90.4842 19 191C19 291.516 100.484 373 201 373Z" fill="url(#paint0_linear_1_19)"/>\\n </g>\\n <g filter="url(#filter1_d_1_19)">\\n <path fill-rule="evenodd" clip-rule="evenodd" d="M200.5 302C262.08 302 312 252.08 312 190.5C312 128.92 262.08 79 200.5 79C138.92 79 89 128.92 89 190.5C89 252.08 138.92 302 200.5 302ZM200.5 326C275.335 326 336 265.335 336 190.5C336 115.665 275.335 55 200.5 55C125.665 55 65 115.665 65 190.5C65 265.335 125.665 326 200.5 326Z" fill="url(#paint1_linear_1_19)"/>\\n </g>\\n <defs>\\n <filter id="filter0_d_1_19" x="0.4" y="0.4" width="403.2" height="403.2" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\\n <feFlood flood-opacity="0" result="BackgroundImageFix"/>\\n <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\\n <feOffset dx="1" dy="11"/>\\n <feGaussianBlur stdDeviation="9.8"/>\\n <feComposite in2="hardAlpha" operator="out"/>\\n <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>\\n <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_19"/>\\n <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_19" result="shape"/>\\n </filter>\\n <filter id="filter1_d_1_19" x="46.4" y="46.4" width="310.2" height="310.2" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\\n <feFlood flood-opacity="0" result="BackgroundImageFix"/>\\n <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\\n <feOffset dx="1" dy="11"/>\\n <feGaussianBlur stdDeviation="9.8"/>\\n <feComposite in2="hardAlpha" operator="out"/>\\n <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>\\n <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_19"/>\\n <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_19" result="shape"/>\\n </filter>\\n <linearGradient id="paint0_linear_1_19" x1="78.7712" y1="51.9816" x2="324.572" y2="313.9" gradientUnits="userSpaceOnUse">\\n <stop stop-color="#35CD9C"/>\\n <stop offset="0.465" stop-color="#43FFFC"/>\\n <stop offset="0.545" stop-color="#C2F6F9"/>\\n <stop offset="1" stop-color="#33BFF1"/>\\n </linearGradient>\\n <linearGradient id="paint1_linear_1_19" x1="109.5" y1="87" x2="292.5" y2="282" gradientUnits="userSpaceOnUse">\\n <stop stop-color="#35CD9C"/>\\n <stop offset="0.465" stop-color="#43FFFC"/>\\n <stop offset="0.545" stop-color="#C2F6F9"/>\\n <stop offset="1" stop-color="#33BFF1"/>\\n </linearGradient>\\n </defs>\\n </svg>\\n <h2 id="uw-a11y-title">Pinpoint Accessibility Checker</h2>\\n </div>\\n <div class="uw-a11y-header-buttons">\\n <button id="uw-a11y-minimize" title="Minimize">−</button>\\n <button id="uw-a11y-close" title="Close">✕</button>\\n </div>\\n </div>\\n <div id="uw-a11y-content">\\n <div id="uw-a11y-view-results" class="uw-a11y-view">\\n <div id="uw-a11y-summary"></div>\\n <p class="if-issues">\\n <div class="mouse-icon"></div>\\n <small>Select any item below to highlight the element on the page.</small>\\n </p>\\n <div id="uw-a11y-results"></div>\\n </div>\\n\\n <div id="uw-a11y-view-about" class="uw-a11y-view" hidden>\\n <div class="uw-a11y-about">\\n <h3>About Pinpoint</h3>\\n <p>Version: <strong>\${this.version}</strong> · Engine: axe-core v\${this.getAxeVersion&&this.getAxeVersion()||"unknown"}</p>\\n <p>Pinpoint Accessibility Checker helps quickly find accessibility issues and best-practice improvements, pairing automated results with guidance.</p>\\n <p><a href="https://github.com/althe3rd/Pinpoint" target="_blank" rel="noopener noreferrer">Project on GitHub</a> | <a href="https://github.com/althe3rd/Pinpoint/issues" target="_blank" rel="noopener noreferrer">Report an Issue</a> | <a href="https://github.com/althe3rd/Pinpoint/releases" target="_blank" rel="noopener noreferrer">Changelog</a></p>\\n \\n </div>\\n </div>\\n\\n <div id="uw-a11y-view-settings" class="uw-a11y-view" hidden>\\n <div class="uw-a11y-settings">\\n <h3>Settings</h3>\\n <p>Lightweight options will appear here. For now, results filters and checked items persist for this session.</p>\\n </div>\\n </div>\\n\\n <div id="uw-a11y-view-help" class="uw-a11y-view" hidden>\\n <div class="uw-a11y-help">\\n <h3>Help</h3>\\n <ul>\\n <li>Click a result to highlight it on the page.</li>\\n <li>Use the eye icons to filter categories.</li>\\n <li>Open “Learn more” links for WCAG details.</li>\\n </ul>\\n <p>Need more? Visit the <a href="https://github.com/althe3rd/Pinpoint#readme" target="_blank" rel="noopener noreferrer">documentation</a>.</p>\\n </div>\\n </div>\\n </div>\\n </div>\\n </div>\\n \`,this.shadowRoot.getElementById("uw-a11y-close").onclick=()=>this.remove();const e=this.shadowRoot.getElementById("uw-a11y-minimize");return e&&(e.style.display="none"),this.initDrag(),this.initNavigation(),this.renderSettings(),this.loadGSAP().then(()=>{this.setupInitialHeight(),this.animatePanel(),setTimeout(()=>{this.animateNavigation()},100),this.setupResizeHandler()}),this.shadowRoot.getElementById("uw-a11y-panel")},getStyles:function(){return'<style>\\n :host {\\n all: initial;\\n font-family: "Red Hat Display", "Red Hat Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\\n }\\n \\n /* ===== Scrollbar CSS ===== */\\n /* Firefox */\\n * {\\n scrollbar-width: auto;\\n scrollbar-color:rgb(132, 132, 132) rgba(255,255,255,0.0) ;\\n }\\n\\n /* Chrome, Edge, and Safari */\\n *::-webkit-scrollbar {\\n width: 8px;\\n \\n }\\n\\n *::-webkit-scrollbar-track {\\n background: transparent;\\n }\\n\\n *::-webkit-scrollbar-thumb {\\n background-color:rgb(188, 188, 188);\\n border-radius: 10px;\\n \\n }\\n\\n #uw-a11y-wrapper {\\n display: grid;\\n grid-template-columns: 60px 1fr;\\n position: fixed;\\n top: 20px;\\n right: 20px;\\n width: 450px;\\n \\n z-index: 999999;\\n gap: .4rem;\\n background: rgba(0,0,0,0.7);\\n backdrop-filter: blur(20px);\\n padding: 4px;\\n border-radius: 16px;\\n transition: height 0.4s;\\n }\\n\\n #uw-a11y-nav {\\n justify-content: center;\\n color: #fff;\\n\\n }\\n\\n #uw-a11y-nav ul {\\n list-style: none;\\n padding: 0;\\n margin: 0;\\n display: flex;\\n gap: 1rem;\\n display: flex;\\n flex-direction: column;\\n }\\n\\n #uw-a11y-nav ul li {\\n position: relative;\\n /* Prevent FOUC: start hidden; GSAP/CSS will reveal */\\n opacity: 0;\\n }\\n\\n #uw-a11y-nav ul li a {\\n display: block;\\n color: #fff;\\n text-decoration: none;\\n padding: 0.5rem .5rem;\\n border-radius: 12px;\\n transition: background 0.3s ease;\\n font-size: 0.7rem;\\n text-align: center\\n }\\n\\n #uw-a11y-nav ul li a:hover {\\n background: rgba(255, 255, 255, 0.1);\\n }\\n\\n #uw-a11y-nav ul li a.active {\\n background: rgba(255,255,255,0.18);\\n }\\n\\n #uw-a11y-nav ul li a svg {\\n width: 20px;\\n height: 20px;\\n margin: 0 auto;\\n margin-bottom: 4px;\\n display: block;\\n \\n }\\n\\n .uw-a11y-nav-icon {\\n width: 22px;\\n height: 22px;\\n display: block;\\n margin: 0 auto 4px auto;\\n }\\n\\n .uw-a11y-nav-label {\\n display: block;\\n line-height: 1.1;\\n }\\n\\n /* View switching */\\n .uw-a11y-view[hidden] { display: none; }\\n\\n /* Settings styles */\\n .uw-a11y-settings { margin-bottom: 3rem; }\\n .uw-a11y-settings h3 { margin: 0 0 .5rem 0; }\\n .uw-a11y-form-row { margin: .75rem 0; }\\n .uw-a11y-input { width: 80%; padding: 8px 14px; border-radius: 6px; border: 1px solid #cbd3da; font-size: 14px; border-radius: 50rem; }\\n .uw-a11y-helptext { font-size: 12px; color: #555; margin-top: 4px; }\\n .uw-a11y-actions { display: flex; gap: .5rem; margin-top: .75rem; }\\n .uw-a11y-btn { appearance: none; border: 1px solid #b6bcc2; background: #fff; color: #111; padding: 6px 10px; border-radius: 6px; cursor: pointer; font-size: 13px; }\\n .uw-a11y-btn.primary { background: #0d6efd; border-color: #0d6efd; color: #fff; }\\n .uw-a11y-btn:disabled { opacity: .6; cursor: not-allowed; }\\n .uw-a11y-reset-icon { width: 16px; height: 16px; vertical-align: text-bottom; margin-right: 6px; }\\n .uw-a11y-msg { font-size: 12px; margin-top: 6px; }\\n .uw-a11y-msg.ok { color: #155724; }\\n .uw-a11y-msg.err { color: #721c24; }\\n\\n #uw-a11y-panel {\\n \\n background: rgba(239, 239, 239, 0.9);\\n border: 1px solid rgba(255,255,255,0.85);\\n border-radius: 12px;\\n backdrop-filter: blur(12px);\\n box-shadow: 0 8px 32px rgba(0,0,0,0.3);\\n z-index: 999999;\\n font-family: "Red Hat Display", "Red Hat Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\\n font-size: 14px;\\n overflow: hidden;\\n transition: all 0.3s ease;\\n outline: none;\\n }\\n \\n #uw-a11y-panel:focus {\\n outline: 3px solid #007cba;\\n outline-offset: 2px;\\n }\\n \\n /* Screen reader only text */\\n .sr-only {\\n position: absolute;\\n width: 1px;\\n height: 1px;\\n padding: 0;\\n margin: -1px;\\n overflow: hidden;\\n clip: rect(0, 0, 0, 0);\\n white-space: nowrap;\\n border: 0;\\n }\\n \\n /* Animated click icon */\\n .uw-a11y-click-icon {\\n display: inline-block;\\n margin-right: 8px;\\n color: #007cba;\\n animation: uw-pulse 2s ease-in-out infinite;\\n vertical-align: middle;\\n }\\n \\n @keyframes uw-pulse {\\n 0% {\\n transform: scale(1);\\n opacity: 1;\\n }\\n 50% {\\n transform: scale(1.1);\\n opacity: 0.8;\\n }\\n 100% {\\n transform: scale(1);\\n opacity: 1;\\n }\\n }\\n\\n #uw-a11y-panel .accentcolors {\\n position: absolute;\\n top: 0;\\n left: 0;\\n width: 100%;\\n height: 100%;\\n z-index: -1;\\n }\\n\\n #uw-a11y-panel .accentcolors .color1 {\\n content: "";\\n position: absolute;\\n top: 0;\\n left: 0;\\n width: 30%;\\n height: 60px;\\n filter: blur(60px);\\n background: rgba(121, 20, 222, 0.6);\\n z-index: -1;\\n }\\n\\n #uw-a11y-panel .accentcolors .color2 {\\n content: "";\\n position: absolute;\\n top: 0;\\n right: 0;\\n width: 30%;\\n height: 50px;\\n filter: blur(60px);\\n background: rgba(52, 126, 223, 0.6);\\n z-index: -1;\\n }\\n\\n #uw-a11y-panel .accentcolors .color3 {\\n content: "";\\n position: absolute;\\n top: 0;\\n left: 30%;\\n width: 40%;\\n height: 20px;\\n filter: blur(60px);\\n background: rgba(23, 72, 248, 0.6);\\n z-index: -1;\\n }\\n\\n \\n #uw-a11y-panel.minimized {\\n bottom: -1px;\\n top: auto;\\n right: 20px;\\n width: 400px;\\n max-height: 180px;\\n border-radius: 8px 8px 0 0;\\n }\\n\\n .violationtype {\\n margin-bottom: 0.5rem;\\n display: flex;\\n align-items: center;\\n justify-content: space-between;\\n }\\n #uw-a11y-panel .info-with-tooltip {\\n display: inline-flex;\\n align-items: center;\\n gap: 6px;\\n position: relative;\\n }\\n #uw-a11y-panel .info-btn {\\n background: white;\\n border: 1px solid rgba(0,0,0,0.2);\\n color: #333;\\n width: 18px;\\n height: 18px;\\n border-radius: 50%;\\n display: inline-flex;\\n align-items: center;\\n justify-content: center;\\n font-size: 12px;\\n line-height: 1;\\n cursor: pointer;\\n padding: 0;\\n }\\n #uw-a11y-panel .info-btn:focus {\\n outline: 2px solid #007cba;\\n outline-offset: 2px;\\n }\\n #uw-a11y-panel .tooltip {\\n position: absolute;\\n left: 0;\\n top: 140%;\\n background: #212529;\\n color: #fff;\\n padding: 6px 8px;\\n border-radius: 4px;\\n font-size: 12px;\\n max-width: 260px;\\n box-shadow: 0 4px 10px rgba(0,0,0,0.15);\\n opacity: 0;\\n visibility: hidden;\\n transition: opacity 0.15s ease;\\n z-index: 10;\\n }\\n #uw-a11y-panel .info-btn:hover + .tooltip,\\n #uw-a11y-panel .info-btn:focus + .tooltip {\\n opacity: 1;\\n visibility: visible;\\n }\\n\\n \\n \\n #uw-a11y-panel.minimized #uw-a11y-content {\\n max-height: 120px;\\n padding: 8px 16px;\\n display: none;\\n }\\n \\n #uw-a11y-panel.minimized #uw-a11y-results {\\n display: none;\\n }\\n \\n #uw-a11y-panel.minimized .uw-a11y-score-container {\\n margin: 0.5rem 0;\\n padding: 0.5rem;\\n }\\n \\n #uw-a11y-panel.minimized .uw-a11y-score-dial {\\n width: 60px;\\n height: 60px;\\n }\\n \\n #uw-a11y-panel.minimized .uw-a11y-score-circle {\\n width: 60px;\\n height: 60px;\\n }\\n \\n #uw-a11y-panel.minimized .uw-a11y-score-inner {\\n width: 45px;\\n height: 45px;\\n }\\n \\n #uw-a11y-panel.minimized .uw-a11y-score-number {\\n font-size: 16px;\\n }\\n \\n #uw-a11y-panel.minimized .uw-a11y-score-label {\\n font-size: 8px;\\n }\\n \\n #uw-a11y-panel.minimized h3 {\\n font-size: 14px;\\n margin-bottom: 0.5rem;\\n }\\n \\n #uw-a11y-panel.minimized #uw-a11y-minimize {\\n transform: rotate(180deg);\\n }\\n #uw-a11y-panel #uw-a11y-header {\\n color: #000;\\n padding: 12px 16px;\\n display: flex;\\n justify-content: space-between;\\n align-items: center;\\n cursor: grab; /* drag handle */\\n user-select: none;\\n }\\n \\n #uw-a11y-panel #uw-a11y-header:active { cursor: grabbing; }\\n \\n #uw-a11y-panel .uw-a11y-header-buttons {\\n display: flex;\\n gap: 8px;\\n }\\n #uw-a11y-panel .uw-a11y-title-container {\\n display: flex;\\n align-items: center;\\n gap: 8px;\\n }\\n \\n #uw-a11y-panel .uw-a11y-logo {\\n width: 24px;\\n height: 24px;\\n flex-shrink: 0;\\n }\\n \\n #uw-a11y-panel.minimized .uw-a11y-logo {\\n width: 18px;\\n height: 18px;\\n }\\n \\n #uw-a11y-panel #uw-a11y-header h2 {\\n margin: 0;\\n font-size: 16px;\\n font-weight: bold;\\n }\\n #uw-a11y-panel #uw-a11y-close, #uw-a11y-panel #uw-a11y-minimize {\\n background: none;\\n border: none;\\n color: black;\\n font-size: 18px;\\n cursor: pointer;\\n padding: 0;\\n width: 24px;\\n height: 24px;\\n border-radius: 50%;\\n display: flex;\\n align-items: center;\\n justify-content: center;\\n transition: all 0.2s ease;\\n }\\n \\n #uw-a11y-panel #uw-a11y-close:hover, #uw-a11y-panel #uw-a11y-minimize:hover {\\n background: rgba(255,255,255,0.2);\\n }\\n \\n #uw-a11y-panel #uw-a11y-close:focus, #uw-a11y-panel #uw-a11y-minimize:focus {\\n outline: 2px solid #007cba;\\n outline-offset: 2px;\\n background: rgba(255,255,255,0.3);\\n }\\n \\n #uw-a11y-panel #uw-a11y-minimize { display: none; }\\n #uw-a11y-panel #uw-a11y-content {\\n max-height: calc(85vh - 60px);\\n overflow-y: auto;\\n padding: 16px;\\n transition: height 0.4s ease-in-out;\\n box-sizing: border-box;\\n }\\n\\n /* Initial animation states to prevent flash - fast transitions for GSAP override */\\n #uw-a11y-wrapper {\\n opacity: 0;\\n transform: scale(0.9) translateY(20px);\\n }\\n\\n /* Important: Only apply the initial offset when using the CSS fallback.\\n GSAP handles transforms when available, so the base <li> should not be offset. */\\n #uw-a11y-nav ul li.uw-a11y-css-animate {\\n opacity: 0;\\n transform: translateX(-30px) scale(0.9);\\n }\\n\\n /* CSS-only animations (fallback when GSAP not available) */\\n #uw-a11y-wrapper.uw-a11y-css-animate {\\n transition: opacity 0.5s ease-out, transform 0.5s ease-out;\\n }\\n\\n #uw-a11y-nav ul li.uw-a11y-css-animate {\\n transition: opacity 0.6s ease-out, transform 0.6s ease-out;\\n }\\n\\n /* Stagger delays for CSS-only animations */\\n #uw-a11y-nav ul li.uw-a11y-css-animate:nth-child(1) { transition-delay: 0.3s; }\\n #uw-a11y-nav ul li.uw-a11y-css-animate:nth-child(2) { transition-delay: 0.4s; }\\n #uw-a11y-nav ul li.uw-a11y-css-animate:nth-child(3) { transition-delay: 0.5s; }\\n #uw-a11y-nav ul li.uw-a11y-css-animate:nth-child(4) { transition-delay: 0.6s; }\\n\\n /* Show elements when animations are ready */\\n #uw-a11y-wrapper.uw-a11y-animate-in {\\n opacity: 1;\\n transform: scale(1) translateY(0);\\n }\\n\\n #uw-a11y-nav ul li.uw-a11y-animate-in {\\n opacity: 1;\\n transform: translateX(0) scale(1);\\n }\\n\\n /* Respect reduced motion preference */\\n @media (prefers-reduced-motion: reduce) {\\n #uw-a11y-panel #uw-a11y-content {\\n transition: none;\\n }\\n \\n #uw-a11y-nav ul li a {\\n transition: none;\\n }\\n\\n /* Immediately show elements when reduced motion is preferred */\\n #uw-a11y-wrapper,\\n #uw-a11y-nav ul li {\\n opacity: 1 !important;\\n transform: none !important;\\n transition: none !important;\\n }\\n }\\n #uw-a11y-panel #uw-a11y-summary {\\n background: #f8f9fa;\\n /*border: 1px solid #dee2e6;*/\\n box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.12);\\n border-radius: 10px;\\n padding: 10px;\\n margin-bottom: 16px;\\n \\n }\\n #uw-a11y-panel .uw-a11y-issue {\\n margin-bottom: 18px;\\n padding: 12px;\\n border-left: 4px solid #ffc107;\\n background: #fff3cd;\\n border-radius: 8px;\\n cursor: pointer;\\n transition: all 0.2s ease;\\n position: relative;\\n outline: none;\\n \\n }\\n \\n /* Hover states for different issue types */\\n #uw-a11y-panel .uw-a11y-issue:hover {\\n transform: translateY(-1px);\\n border-color: rgba(0,0,0,0.15);\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.error:hover {\\n background: #f5c2c7;\\n box-shadow: 0 4px 20px 0 rgba(211, 23, 41, 0.35);\\n border-color: rgba(220, 53, 69, 0.3);\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.warning:hover {\\n background: #F6EBC7;\\n box-shadow: 0 4px 20px 0 rgba(211, 133, 23, 0.35);\\n border-color: rgba(255, 193, 7, 0.4);\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.info:hover {\\n background: #b8daff;\\n box-shadow: 0 4px 20px 0 rgba(23, 104, 211, 0.35);\\n border-color: rgba(23, 162, 184, 0.3);\\n cursor: default;\\n }\\n \\n /* Focus states for keyboard accessibility */\\n #uw-a11y-panel .uw-a11y-issue:focus {\\n outline: 3px solid #007cba;\\n outline-offset: 2px;\\n transform: translateY(-1px);\\n z-index: 1;\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.error:focus {\\n outline-color: #dc3545;\\n background: #f5c2c7;\\n box-shadow: 0 4px 20px 0 rgba(211, 23, 41, 0.35);\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.warning:focus {\\n outline-color: #ffc107;\\n background: #F6EBC7;\\n box-shadow: 0 4px 20px 0 rgba(211, 133, 23, 0.35);\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.info:focus {\\n outline-color: #17a2b8;\\n background: #b8daff;\\n box-shadow: 0 4px 20px 0 rgba(23, 104, 211, 0.35);\\n }\\n \\n /* Active/pressed states */\\n #uw-a11y-panel .uw-a11y-issue:active {\\n transform: translateY(0px);\\n transition: transform 0.1s ease;\\n }\\n \\n /* Enhanced checked state hover */\\n #uw-a11y-panel .uw-a11y-issue.checked:hover {\\n background: #c3e6cb !important;\\n transform: translateY(-1px);\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.checked:focus {\\n outline-color: #28a745;\\n background: #c3e6cb !important;\\n }\\n #uw-a11y-panel .uw-a11y-issue.error {\\n border-left-color: #dc3545;\\n background: #f8d7da;\\n box-shadow: 0 2px 10px 0 rgba(211, 23, 41, 0.22);\\n }\\n #uw-a11y-panel .uw-a11y-issue.warning {\\n border-left-color: #ffc107;\\n background: #fff3cd;\\n box-shadow: 0 2px 10px 0 rgba(211, 133, 23, 0.22);\\n }\\n #uw-a11y-panel .uw-a11y-issue.info {\\n border-left-color: #17a2b8;\\n background: #d1ecf1;\\n box-shadow: 0 2px 10px 0 rgba(23, 104, 211, 0.22);\\n }\\n #uw-a11y-panel .uw-a11y-issue h4 {\\n margin: 0 0 8px 0;\\n font-size: 14px;\\n font-weight: bold;\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue-header {\\n display: flex;\\n align-items: center;\\n gap: 8px;\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue-icon {\\n width: 18px;\\n height: 18px;\\n flex-shrink: 0;\\n align-self: flex-start;\\n }\\n \\n #uw-a11y-panel .uw-a11y-error-icon {\\n color: #dc3545;\\n margin-top: 2px;\\n }\\n \\n #uw-a11y-panel .uw-a11y-warning-icon {\\n color: #856404;\\n margin-top: 2px;\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue.checked .uw-a11y-issue-icon.type-warning {\\n color: #155724;\\n }\\n \\n #uw-a11y-panel .uw-a11y-issue-title {\\n flex: 1;\\n }\\n\\n /* Unified icon styles for summary + issue items */\\n #uw-a11y-panel .issue-type-icon svg {\\n width: 18px;\\n height: 18px;\\n display: inline-block;\\n vertical-align: middle;\\n }\\n #uw-a11y-panel .issue-type-icon { display: inline-flex; align-items: center; margin: 0 4px 0 6px; }\\n #uw-a11y-panel .issue-type-icon.type-error svg,\\n #uw-a11y-panel .uw-a11y-issue-icon.type-error { color: #dc3545; }\\n #uw-a11y-panel .issue-type-icon.type-warning svg,\\n #uw-a11y-panel .uw-a11y-issue-icon.type-warning { color: #e0a800; }\\n #uw-a11y-panel .issue-type-icon.type-info svg,\\n #uw-a11y-panel .uw-a11y-issue-icon.type-info { color: #17a2b8; }\\n #uw-a11y-panel .uw-a11y-issue p {\\n margin: 4px 0;\\n line-height: 1.4;\\n }\\n #uw-a11y-panel .uw-a11y-issue .issue-meta {\\n font-size: 12px;\\n color: #3c3c3c;\\n margin-top: 8px;\\n padding-top: 8px;\\n border-top: 1px solid rgba(0,0,0,0.1);\\n display: flex;\\n justify-content: space-between;\\n align-items: center;\\n }\\n #uw-a11y-panel .uw-a11y-issue .learn-more {\\n color: #c5050c;\\n \\n font-size: 12px;\\n }\\n #uw-a11y-panel .uw-a11y-issue .learn-more:hover {\\n text-decoration: underline;\\n }\\n\\n #uw-a11y-panel .uw-a11y-issue.error .learn-more {\\n color: #dc3545;\\n }\\n\\n #uw-a11y-panel .uw-a11y-issue.warning .learn-more {\\n color: #856404;\\n }\\n\\n #uw-a11y-panel .uw-a11y-issue .how-to-fix {\\n margin-top: 8px;\\n border-radius: 4px;\\n background: rgb(241, 241, 241);\\n padding: 8px;\\n font-size: 13px;\\n color: #212529;\\n font-weight: 500;\\n border-left: 4px solid rgb(51, 141, 214);\\n display: flex;\\n align-items: center;\\n gap: 8px;\\n }\\n\\n #uw-a11y-panel .uw-a11y-issue .how-to-fix-icon {\\n align-self: flex-start;\\n margin-top: 2px;\\n }\\n\\n #uw-a11y-panel .uw-a11y-issue .how-to-fix-icon svg {\\n width: 12px;\\n height: 12px;\\n }\\n\\n #uw-a11y-panel .uw-a11y-issue .how-to-fix svg path {\\n fill: rgb(51, 141, 214);\\n }\\n\\n \\n /* Note: .uw-a11y-highlight is applied to the main document, not shadow DOM */\\n #uw-a11y-panel .uw-a11y-count {\\n font-weight: bold;\\n padding: 2px 8px;\\n border-radius: 12px;\\n color: white;\\n font-size: 12px;\\n margin-right: 8px;\\n }\\n #uw-a11y-panel .count-error { background: #dc3545; }\\n #uw-a11y-panel .count-warning { background: #ffc107; color: #212529; }\\n #uw-a11y-panel .count-info { background: #17a2b8; }\\n #uw-a11y-panel .count-verified { background: #28a745; }\\n #uw-a11y-panel .filter-toggle .icon-eye-off { display: none; }\\n #uw-a11y-panel .filter-toggle[aria-pressed="false"] .icon-eye { display: none; }\\n #uw-a11y-panel .filter-toggle[aria-pressed="false"] .icon-eye-off { display: inline; }\\n #uw-a11y-panel .filter-toggle {\\n background: none;\\n border: 1px solid rgba(0,0,0,0.15);\\n border-radius: 6px;\\n padding: 2px 6px;\\n cursor: pointer;\\n color: #333;\\n display: inline-flex;\\n align-items: center;\\n gap: 6px;\\n font-size: 12px;\\n }\\n #uw-a11y-panel .filter-toggle:hover {\\n background: rgba(0,0,0,0.05);\\n }\\n #uw-a11y-panel .filter-toggle:focus {\\n outline: 2px solid #007cba;\\n outline-offset: 2px;\\n }\\n #uw-a11y-panel .filter-toggle[aria-pressed="false"] {\\n opacity: 0.45;\\n }\\n #uw-a11y-panel .filter-icon { width: 16px; height: 16px; }\\n #uw-a11y-panel .uw-a11y-manual-check {\\n margin: 8px 0;\\n padding: 8px;\\n background: #f8f9fa;\\n border-radius: 4px;\\n border: 1px solid #dee2e6;\\n }\\n #uw-a11y-panel .uw-a11y-checkbox {\\n display: flex;\\n align-items: center;\\n cursor: pointer;\\n font-size: 13px;\\n }\\n #uw-a11y-panel .uw-a11y-checkbox input[type="checkbox"] {\\n margin-right: 8px;\\n width: 16px;\\n height: 16px;\\n }\\n #uw-a11y-panel .uw-a11y-issue.checked {\\n opacity: 0.7;\\n background: #d4edda !important;\\n border-left-color: #28a745 !important;\\n }\\n #uw-a11y-panel .uw-a11y-issue.checked .uw-a11y-manual-check {\\n background: #d4edda;\\n border-color: #c3e6cb;\\n }\\n #uw-a11y-panel .uw-a11y-check-label {\\n color: #155724;\\n font-weight: 500;\\n }\\n #uw-a11y-panel .uw-a11y-spinner {\\n width: 40px;\\n height: 40px;\\n border: 4px solid #f3f3f3;\\n border-top: 4px solid #c5050c;\\n border-radius: 50%;\\n animation: uw-spin 1s linear infinite;\\n margin: 0 auto;\\n }\\n @keyframes uw-spin {\\n 0% { transform: rotate(0deg); }\\n 100% { transform: rotate(360deg); }\\n }\\n #uw-a11y-panel .axe-summary {\\n font-size: 12px;\\n color: #666;\\n border-top: 1px solid #dee2e6;\\n padding-top: 12px;\\n margin-top: 12px;\\n }\\n #uw-a11y-panel .uw-a11y-score-container {\\n text-align: center;\\n margin: 1rem 0;\\n padding: 1rem;\\n background: #f8f9fa;\\n border-radius: 8px;\\n border: 2px solid #e9ecef;\\n }\\n #uw-a11y-panel .uw-a11y-score-dial {\\n position: relative;\\n width: 120px;\\n height: 120px;\\n margin: 0 auto 1rem auto;\\n }\\n #uw-a11y-panel .uw-a11y-score-circle {\\n width: 120px;\\n height: 120px;\\n border-radius: 50%;\\n background: conic-gradient(from 0deg, #28a745 0deg 0deg, #e9ecef 0deg 360deg);\\n display: flex;\\n align-items: center;\\n justify-content: center;\\n position: relative;\\n }\\n #uw-a11y-panel .uw-a11y-score-inner {\\n width: 90px;\\n height: 90px;\\n background: white;\\n border-radius: 50%;\\n display: flex;\\n align-items: center;\\n justify-content: center;\\n flex-direction: column;\\n font-weight: bold;\\n }\\n #uw-a11y-panel .uw-a11y-score-number {\\n font-size: 24px;\\n color: #333;\\n }\\n #uw-a11y-panel .uw-a11y-score-label {\\n font-size: 10px;\\n color: #666;\\n text-transform: uppercase;\\n }\\n #uw-a11y-panel .uw-a11y-details {\\n margin-top: 1rem;\\n padding: 0.5rem;\\n background: #f1f3f4;\\n border-left: 3px solid #007cba;\\n border-radius: 0 4px 4px 0;\\n font-size: 12px;\\n display: none;\\n }\\n #uw-a11y-panel .uw-a11y-details.expanded {\\n display: block;\\n }\\n #uw-a11y-panel .uw-a11y-details-toggle {\\n display: block;\\n background: rgba(0,0,0,0.12);\\n border: 1px solid rgba(0,0,0,0.3);\\n border-radius: 50rem;\\n padding: 4px 8px;\\n color:rgb(28, 28, 28);\\n cursor: pointer;\\n font-size: 12px;\\n text-decoration: none;\\n backdrop-filter: saturate(250%);\\n margin-top: 0.5rem;\\n }\\n\\n #uw-a11y-panel .uw-a11y-details-toggle {\\n display: flex;\\n align-items: center;\\n gap: 8px;\\n }\\n\\n\\n #uw-a11y-panel .uw-a11y-details-toggle .technical-details-icon {\\n width: 12px;\\n height: 12px;\\n }\\n\\n #uw-a11y-panel .uw-a11y-details-item {\\n margin: 0.5rem 0;\\n padding: 0.5rem;\\n background: white;\\n border-radius: 3px;\\n }\\n\\n #uw-a11y-panel .uw-a11y-details-label {\\n font-weight: bold;\\n color: #495057;\\n }\\n #uw-a11y-panel .uw-a11y-details-value {\\n font-family: monospace;\\n background: #f8f9fa;\\n padding: 0.25rem;\\n border-radius: 2px;\\n margin-top: 0.25rem;\\n word-break: break-all;\\n }\\n #uw-a11y-panel .uw-a11y-instance-nav {\\n display: flex;\\n justify-content: space-between;\\n align-items: center;\\n margin-top: -12px;\\n margin-left: -12px;\\n margin-right: -12px;\\n margin-bottom: 10px;\\n padding: 8px;\\n background: rgba(0,0,0,0.1);\\n backdrop-filter: saturate(200%);\\n border-top-right-radius: 4px;\\n font-size: 12px;\\n }\\n #uw-a11y-panel .uw-a11y-instance-count {\\n font-weight: bold;\\n color: #495057;\\n }\\n #uw-a11y-panel .uw-a11y-nav-buttons {\\n display: flex;\\n gap: 4px;\\n }\\n #uw-a11y-panel .uw-a11y-nav-buttons button {\\n background:rgba(0,0,0,0.4);\\n backdrop-filter: saturate(200%);\\n color: white;\\n border: none;\\n padding: 4px 8px;\\n border-radius: 3px;\\n font-size: 11px;\\n cursor: pointer;\\n transition: background 0.2s;\\n }\\n #uw-a11y-panel .uw-a11y-nav-buttons button:hover:not(:disabled) {\\n background:rgba(0,0,0,0.4);\\n }\\n #uw-a11y-panel .uw-a11y-nav-buttons button:disabled {\\n background:rgba(0,0,0,0.1);\\n cursor: not-allowed;\\n }\\n \\n #uw-a11y-panel .uw-a11y-nav-buttons button:focus {\\n outline: 2px solid #007cba;\\n outline-offset: 1px;\\n }\\n \\n /* Details toggle button focus */\\n #uw-a11y-panel .uw-a11y-details-toggle:focus {\\n outline: 2px solid #007cba;\\n outline-offset: 2px;\\n background: rgba(0,0,0,0.2);\\n }\\n \\n /* Checkbox focus states */\\n #uw-a11y-panel .uw-a11y-checkbox input[type="checkbox"]:focus {\\n outline: 2px solid #007cba;\\n outline-offset: 2px;\\n }\\n \\n /* Learn more link focus */\\n #uw-a11y-panel .uw-a11y-issue .learn-more:focus {\\n outline: 2px solid #007cba;\\n outline-offset: 2px;\\n text-decoration: underline;\\n }\\n \\n #uw-a11y-panel .how-to-fix code {\\n background: #f8f9fa;\\n border: 1px solid #e9ecef;\\n border-radius: 3px;\\n padding: 2px 4px;\\n font-family: \\'Consolas\\', \\'Monaco\\', \\'Courier New\\', monospace;\\n font-size: 12px;\\n color: #e83e8c;\\n font-weight: 600;\\n white-space: nowrap;\\n }\\n \\n #uw-a11y-panel .how-to-fix code:not(:last-child) {\\n margin-right: 2px;\\n }\\n </style>'},prefersReducedMotion:function(){return window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},loadGSAP:function(){return new Promise(e=>{if(this.prefersReducedMotion())return console.log("🎯 Reduced motion preferred - animations disabled"),void e(null);if(window.gsap)return void e(window.gsap);const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js",t.onload=()=>{console.log("✨ GSAP loaded successfully"),e(window.gsap)},t.onerror=()=>{console.warn("❌ Failed to load GSAP, animations will be disabled"),e(null)},document.head.appendChild(t)})},setupInitialHeight:function(){const e=this.shadowRoot.getElementById("uw-a11y-content");if(!e)return;const t=this.measureViewHeight("results"),n=this.getMaxContentHeight();t&&(e.style.height=t+"px",e.style.maxHeight=n+"px",e.style.overflowY="auto")},setupResizeHandler:function(){this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=()=>{const e=this.shadowRoot.getElementById("uw-a11y-content");if(!e)return;const t=this.getMaxContentHeight(),n=this.measureViewHeight(this.currentView||"results"),i=Math.min(n,t);e.style.maxHeight=t+"px",window.gsap&&!this.prefersReducedMotion()?window.gsap.to(e,{height:i,duration:.3,ease:"power2.out"}):e.style.height=i+"px",e.style.overflowY="auto"},window.addEventListener("resize",this.resizeHandler)},initDrag:function(){const e=this.shadowRoot.getElementById("uw-a11y-wrapper"),t=this.shadowRoot.getElementById("uw-a11y-header");if(!e||!t)return;let n=0,i=0,a=0,o=0;t.addEventListener("pointerdown",s=>{if(void 0!==s.button&&0!==s.button)return;if(s.target&&s.target.closest&&s.target.closest(".uw-a11y-header-buttons"))return;s.preventDefault();try{t.setPointerCapture(s.pointerId)}catch(e){}const r=e.getBoundingClientRect();e.style.right="auto",e.style.left=r.left+"px",e.style.top=r.top+"px",n=s.clientX,i=s.clientY,a=r.left,o=r.top;const l=t=>{let s=a+(t.clientX-n),r=o+(t.clientY-i);const l=Math.max(0,window.innerWidth-e.offsetWidth),c=Math.max(0,window.innerHeight-40);s=Math.min(Math.max(0,s),l),r=Math.min(Math.max(0,r),c),e.style.left=s+"px",e.style.top=r+"px"},c=()=>{document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",c);try{t.releasePointerCapture(s.pointerId)}catch(e){}try{const t={left:parseInt(e.style.left||"0",10)||0,top:parseInt(e.style.top||"0",10)||0};sessionStorage.setItem("uw-a11y-pos",JSON.stringify(t))}catch(e){}};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c)})},applySavedPosition:function(){try{const e=sessionStorage.getItem("uw-a11y-pos");if(!e)return;const t=JSON.parse(e),n=this.shadowRoot.getElementById("uw-a11y-wrapper");if(!n||"object"!=typeof t)return;"number"==typeof t.left&&"number"==typeof t.top&&(n.style.right="auto",n.style.left=\`\${t.left}px\`,n.style.top=\`\${t.top}px\`)}catch(e){}},animatePanel:function(){const e=this.shadowRoot.getElementById("uw-a11y-wrapper");e&&(window.gsap&&!this.prefersReducedMotion()?window.gsap.to(e,{scale:1,opacity:1,y:0,duration:.5,ease:"power3.out"}):(e.classList.add("uw-a11y-css-animate"),setTimeout(()=>{e.classList.add("uw-a11y-animate-in")},50)))},animateNavigation:function(){const e=this.shadowRoot.querySelectorAll("#uw-a11y-nav ul li");if(console.log("🎯 animateNavigation called, found",e.length,"nav items"),0!==e.length)if(window.gsap&&!this.prefersReducedMotion()){console.log("✨ Starting GSAP navigation animation"),e.forEach((e,t)=>{e.style.transform="",e.style.opacity="",console.log(\`🔧 Cleared styles for nav item \${t+1}\`)});const t=window.gsap.fromTo(e,{x:-30,opacity:0,scale:.9},{x:0,opacity:1,scale:1,duration:.6,stagger:.1,ease:"back.out(1.7)",delay:.3,onStart:()=>console.log("🚀 GSAP nav animation started"),onComplete:()=>console.log("✅ GSAP nav animation completed")});console.log("📝 GSAP timeline created:",t),e.forEach(e=>{const t=e.querySelector("a");t&&(t.addEventListener("mouseenter",()=>{this.isAnimating||this.prefersReducedMotion()||window.gsap.to(e,{scale:1.05,duration:.3,ease:"power2.out",overwrite:"auto"})}),t.addEventListener("mouseleave",()=>{this.prefersReducedMotion()||window.gsap.to(e,{scale:1,duration:.3,ease:"power2.out",overwrite:"auto"})}))})}else e.forEach(e=>{e.classList.add("uw-a11y-css-animate")}),setTimeout(()=>{e.forEach((e,t)=>{setTimeout(()=>{e.classList.add("uw-a11y-animate-in")},100*t)})},100);else console.warn("❌ No navigation items found for animation")},getMaxContentHeight:function(){const e=Math.floor(.85*window.innerHeight)-60;return Math.max(200,e)},measureViewHeight:function(e){const t=this.shadowRoot.getElementById(\`uw-a11y-view-\${e}\`);if(!t)return null;const n=t.hasAttribute("hidden"),i={position:t.style.position,visibility:t.style.visibility,height:t.style.height};t.removeAttribute("hidden"),t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto";const a=t.scrollHeight,o=this.getMaxContentHeight(),s=Math.min(a+(this.heightPadding||0),o);return n&&t.setAttribute("hidden",""),t.style.position=i.position,t.style.visibility=i.visibility,t.style.height=i.height,s},animatePanelHeight:function(e){if(!window.gsap)return Promise.resolve();const t=this.shadowRoot.getElementById("uw-a11y-content");return t?(window.gsap.killTweensOf(t),new Promise(n=>{window.gsap.to(t,{height:e,duration:.4,ease:"power2.inOut",onComplete:n})})):Promise.resolve()},animateViewTransition:function(e,t){if(!window.gsap)return Promise.resolve();const n=this.shadowRoot.getElementById(\`uw-a11y-view-\${e}\`),i=this.shadowRoot.getElementById(\`uw-a11y-view-\${t}\`),a=this.shadowRoot.getElementById("uw-a11y-content");return new Promise(o=>{if(n&&window.gsap.killTweensOf(n),i&&window.gsap.killTweensOf(i),a&&window.gsap.killTweensOf(a),!n||!i||e===t)return void o();const s=this.measureViewHeight(t);s?window.gsap.to(n,{opacity:0,y:-10,duration:.2,ease:"power2.in",onComplete:()=>{n.setAttribute("hidden",""),i.removeAttribute("hidden");const e=this.getMaxContentHeight(),t=Math.min(s,e);a.style.overflowY="auto";window.gsap.to(a,{height:t,duration:.4,ease:"power2.inOut"});window.gsap.fromTo(i,{opacity:0,y:10},{opacity:1,y:0,duration:.3,ease:"power2.out",delay:.1,onComplete:o})}}):o()})},initNavigation:function(){this.currentView=null,this.isAnimating=!1;[{id:"uw-a11y-nav-results",view:"results"},{id:"uw-a11y-nav-settings",view:"settings"},{id:"uw-a11y-nav-help",view:"help"},{id:"uw-a11y-nav-about",view:"about"}].forEach(({id:e,view:t})=>{const n=this.shadowRoot.getElementById(e);n&&n.addEventListener("click",e=>{e.preventDefault(),this.isAnimating||this.showView(t)})}),this.showView("results")},showView:function(e){const t=["results","settings","help","about"],n=this.currentView;if(n===e||this.isAnimating)return;this.currentView=e,this.updateNavActiveState(e);if(window.gsap&&n&&n!==e&&!this.prefersReducedMotion())this.isAnimating=!0,this.animateViewTransition(n,e).then(()=>{this.isAnimating=!1,"results"===e&&this.startResultsScoreAnimation()});else{if(t.forEach(t=>{const n=this.shadowRoot.getElementById(\`uw-a11y-view-\${t}\`);n&&(t===e?n.removeAttribute("hidden"):n.setAttribute("hidden",""))}),n&&n!==e){const t=this.shadowRoot.getElementById("uw-a11y-content");if(t){const n=this.measureViewHeight(e),i=this.getMaxContentHeight(),a=Math.min(n,i);t.style.height=a+"px",t.style.overflowY="auto"}}"results"===e&&this.startResultsScoreAnimation()}},updateNavActiveState:function(e){["results","settings","help","about"].forEach(t=>{const n=this.shadowRoot.getElementById(\`uw-a11y-nav-\${t}\`);n&&(window.gsap&&window.gsap.killTweensOf(n),t===e?(n.classList.add("active"),n.setAttribute("aria-current","page")):(n.classList.remove("active"),n.removeAttribute("aria-current"),window.gsap&&window.gsap.set(n,{backgroundColor:""})))})},getEssentialExcludeSelectors:function(){return["#uw-a11y-container","#uw-a11y-panel",".uw-a11y-highlight",'[id^="uw-a11y-"]','[class*="uw-a11y-"]',"#uw-a11y-global-styles"]},getDefaultExcludeSelectors:function(){return["#wpadminbar"]},getSettingsKey:function(){return"uw-a11y-settings"},loadSettings:function(){try{const e=localStorage.getItem(this.getSettingsKey());if(!e)return{};const t=JSON.parse(e);return t&&"object"==typeof t?t:{}}catch(e){return{}}},saveSettings:function(e){try{localStorage.setItem(this.getSettingsKey(),JSON.stringify(e||{}))}catch(e){}},isBestPracticesEnabled:function(){return!1!==this.loadSettings().enableBestPractices},getEffectiveExcludeSelectors:function(){const e=this.getEssentialExcludeSelectors(),t=this.getDefaultExcludeSelectors(),n=this.loadSettings(),i=((Array.isArray(n.excludeSelectors)?n.excludeSelectors:"string"==typeof n.excludeSelectors?n.excludeSelectors.split(","):[])||[]).map(e=>(e||"").toString().trim()).filter(Boolean);return[...new Set([...e,...t,...i])]},shouldExcludeElement:function(e){try{const t=this.getEffectiveExcludeSelectors();for(const n of t)if(n)try{if(e.matches(n))return!0;if(e.closest&&e.closest(n))return!0}catch(e){}}catch(e){}return!1},getDefaultWcag:function(){return{wcagSpec:"2.1",wcagLevel:"AA"}},getSelectedWcag:function(){const e=this.loadSettings(),t=this.getDefaultWcag();return{wcagSpec:e.wcagSpec||t.wcagSpec,wcagLevel:e.wcagLevel||t.wcagLevel}},buildWcagTags:function(e,t){const n=(t||"AA").toUpperCase(),i=n.toLowerCase(),a=["2.0","2.1","2.2"],o=Math.max(0,a.indexOf(e||"2.1")),s=[];for(let e=0;o>=e;e++){const t=a[e].replace(".","");s.push(\`\${0===e?"wcag2":\`wcag\${t}\`}\${i}\`)}if("AA"===n||"AAA"===n)for(let e=0;o>=e;e++){const t=a[e].replace(".",""),n=0===e?"wcag2":\`wcag\${t}\`;s.includes(\`\${n}a\`)||s.push(\`\${n}a\`)}if("AAA"===n)for(let e=0;o>=e;e++){const t=a[e].replace(".",""),n=0===e?"wcag2":\`wcag\${t}\`;s.includes(\`\${n}aa\`)||s.push(\`\${n}aa\`)}return s},getWcagLabel:function(){const{wcagSpec:e,wcagLevel:t}=this.getSelectedWcag();return\`WCAG \${e} \${String(t||"").toUpperCase()}\`},resetSettingsToDefaults:function(){const e={excludeSelectors:this.getDefaultExcludeSelectors(),enableBestPractices:!0,...this.getDefaultWcag()};return this.saveSettings(e),e},renderSettings:function(){const e=this.shadowRoot.getElementById("uw-a11y-view-settings");if(!e)return;const t=this.loadSettings(),n=Array.isArray(t.excludeSelectors)?t.excludeSelectors:this.getDefaultExcludeSelectors(),i=this.filterOutEssential(n).join(", "),a=!1!==t.enableBestPractices,o={...this.getDefaultWcag(),wcagSpec:t.wcagSpec||"2.1",wcagLevel:(t.wcagLevel||"AA").toUpperCase()};e.innerHTML=\`\\n <div class="uw-a11y-settings" role="region" aria-labelledby="uw-a11y-settings-heading">\\n <h3 id="uw-a11y-settings-heading">Settings</h3>\\n <div class="uw-a11y-form-row">\\n <label for="uw-a11y-exclude-input"><strong>Exclude Selectors</strong></label>\\n <input id="uw-a11y-exclude-input" class="uw-a11y-input" type="text" value="\${this.escapeHtmlAttr(i)}" aria-describedby="uw-a11y-exclude-help">\\n <div id="uw-a11y-exclude-help" class="uw-a11y-helptext">Comma‑separated CSS selectors skipped during scanning. Essential internal UI is always excluded.</div>\\n <div id="uw-a11y-settings-msg" class="uw-a11y-msg" aria-live="polite"></div>\\n </div>\\n <div class="uw-a11y-form-row">\\n <label for="uw-a11y-wcag-spec"><strong>WCAG Specification</strong></label>\\n <select id="uw-a11y-wcag-spec" class="uw-a11y-input">\\n <option value="2.0" \${"2.0"===o.wcagSpec?"selected":""}>WCAG 2.0</option>\\n <option value="2.1" \${"2.1"===o.wcagSpec?"selected":""}>WCAG 2.1</option>\\n <option value="2.2" \${"2.2"===o.wcagSpec?"selected":""}>WCAG 2.2</option>\\n </select>\\n <div class="uw-a11y-helptext">Choose which WCAG version to target. Default is 2.1.</div>\\n </div>\\n <div class="uw-a11y-form-row">\\n <label for="uw-a11y-wcag-level"><strong>WCAG Level</strong></label>\\n <select id="uw-a11y-wcag-level" class="uw-a11y-input">\\n <option value="A" \${"A"===o.wcagLevel?"selected":""}>Level A</option>\\n <option value="AA" \${"AA"===o.wcagLevel?"selected":""}>Level AA</option>\\n <option value="AAA" \${"AAA"===o.wcagLevel?"selected":""}>Level AAA</option>\\n </select>\\n <div class="uw-a11y-helptext">Default is AA. Selecting AAA enables extra rules like enhanced color contrast.</div>\\n </div>\\n <div class="uw-a11y-form-row">\\n <label>\\n <input id="uw-a11y-bp-input" type="checkbox" \${a?"checked":""}>\\n <span>Include best‑practice suggestions</span>\\n </label>\\n <div class="uw-a11y-helptext">Additional tips beyond WCAG failures, like link text clarity or new‑tab labeling.</div>\\n <div class="uw-a11y-actions">\\n <button id="uw-a11y-save-settings" class="uw-a11y-btn primary">Save and Re‑scan</button>\\n <button id="uw-a11y-reset-settings" class="uw-a11y-btn" title="Reset to defaults">\\n <svg class="uw-a11y-reset-icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 5V1L7 6l5 5V7a5 5 0 1 1-5 5H5a7 7 0 1 0 7-7z"/></svg>\\n Reset\\n </button>\\n </div>\\n </div>\\n </div>\\n \`;const s=this.shadowRoot.getElementById("uw-a11y-exclude-input"),r=this.shadowRoot.getElementById("uw-a11y-settings-msg"),l=this.shadowRoot.getElementById("uw-a11y-save-settings"),c=this.shadowRoot.getElementById("uw-a11y-reset-settings"),d=this.shadowRoot.getElementById("uw-a11y-bp-input"),u=this.shadowRoot.getElementById("uw-a11y-wcag-spec"),p=this.shadowRoot.getElementById("uw-a11y-wcag-level");l.addEventListener("click",()=>{const e=(s.value||"").split(",").map(e=>e.trim()).filter(Boolean);const t=(e=>{for(const t of e)try{document.querySelectorAll(t)}catch(e){return t}return null})(e);if(t)return r.textContent=\`Invalid selector: \${t}\`,void(r.className="uw-a11y-msg err");const n={excludeSelectors:this.filterOutEssential(e),enableBestPractices:!(!d||!d.checked),wcagSpec:u?u.value:"2.1",wcagLevel:p?p.value:"AA"};this.saveSettings(n),r.textContent="Saved. Re‑scanning…",r.className="uw-a11y-msg ok",this.scoreAnimationPlayed=!1,this.runAxeChecks(),this.showView("results")}),c.addEventListener("click",()=>{const e=this.resetSettingsToDefaults();s.value=this.filterOutEssential(e.excludeSelectors).join(", "),d&&(d.checked=!!e.enableBestPractices),u&&(u.value=e.wcagSpec),p&&(p.value=e.wcagLevel),r.textContent="Settings reset to defaults.",r.className="uw-a11y-msg ok"})},filterOutEssential:function(e){const t=new Set(this.getEssentialExcludeSelectors());return(e||[]).filter(e=>!t.has(e))},escapeHtmlAttr:function(e){return(e||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getAxeVersion:function(){return window.axe&&window.axe.version?window.axe.version:"unknown"},loadFilters:function(){try{const e=localStorage.getItem("uw-a11y-filters");if(e){const t=JSON.parse(e);this.filters={errors:!0,warnings:!0,info:!0,...t}}}catch(e){}},saveFilters:function(){try{localStorage.setItem("uw-a11y-filters",JSON.stringify(this.filters))}catch(e){}},toggleFilter:function(e){["errors","warnings","info"].includes(e)&&(this.filters[e]=!this.filters[e],this.saveFilters(),this.updateFilterUI(),this.refreshIssueList())},updateFilterUI:function(){const e=(e,t)=>{const n=this.shadowRoot.getElementById(e);n&&n.setAttribute("aria-pressed",t?"true":"false");const i=n?.closest(".violationtype");i&&(i.style.color=t?"#000":"#ccc")};e("toggle-errors",this.filters.errors),e("toggle-warnings",this.filters.warnings),e("toggle-info",this.filters.info)},getIssuesForFilters:function(){return this.issues.filter(e=>"error"===e.type&&this.filters.errors||"warning"===e.type&&this.filters.warnings||"info"===e.type&&this.filters.info)},refreshIssueList:function(){const e=this.shadowRoot.getElementById("uw-a11y-results");if(!e)return;const t=this.getIssuesForFilters();if(0===t.length)return void(e.innerHTML='\\n <div class="uw-a11y-issue info">\\n <h4>No issues to display</h4>\\n <p>Adjust the filters above to show hidden groups.</p>\\n </div>\\n ');const n=this.groupIssuesByRule(t),i=Object.keys(n).map(e=>{const t=n[e],i=t[0],a="warning"===i.type&&i.uniqueId,o=t.length>1?\`\\n <div class="uw-a11y-instance-nav">\\n <span class="uw-a11y-instance-count">Instance <span id="current-\${this.sanitizeHtmlId(e)}">1</span> of \${t.length}</span>\\n <div class="uw-a11y-nav-buttons">\\n <button onclick="window.uwAccessibilityChecker.navigateInstance('\${this.escapeJavaScript(e)}', -1); event.stopPropagation();" \\n id="prev-\${this.sanitizeHtmlId(e)}" disabled>‹ Prev</button>\\n <button onclick="window.uwAccessibilityChecker.navigateInstance('\${this.escapeJavaScript(e)}', 1); event.stopPropagation();" \\n id="next-\${this.sanitizeHtmlId(e)}">Next ›</button>\\n </div>\\n </div>\\n \`:"",s=this.getIssueTypeIcon(i.type,"issue");return\`\\n <div class="uw-a11y-issue \${i.type} \${a&&this.isRuleVerified(e)?"checked":""}" \\n onclick="window.uwAccessibilityChecker.highlightCurrentInstance('\${this.escapeJavaScript(e)}')" \\n onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();window.uwAccessibilityChecker.highlightCurrentInstance('\${this.escapeJavaScript(e)}');}"\\n tabindex="0"\\n role="button" \\n aria-label="Click to highlight \${this.escapeHtmlAttribute(i.title)} on the page\${t.length>1?\` (\${t.length} instances)\`:""}"\\n id="issue-\${this.sanitizeHtmlId(e)}">\\n \${o}\\n <h4>\\n <span class="uw-a11y-issue-header">\${s}<span class="uw-a11y-issue-title">\${this.escapeHtmlContent(i.title)} \${t.length>1?\`(\${t.length} instances)\`:""}</span></span>\\n </h4>\\n <div class="how-to-fix"><div class="how-to-fix-icon"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M331.8 224.1c28.29 0 54.88 10.99 74.86 30.97l19.59 19.59c40.01-17.74 71.25-53.3 81.62-96.65c5.725-23.92 5.34-47.08 .2148-68.4c-2.613-10.88-16.43-14.51-24.34-6.604l-68.9 68.9h-75.6V97.2l68.9-68.9c7.912-7.912 4.275-21.73-6.604-24.34c-21.32-5.125-44.48-5.51-68.4 .2148c-55.3 13.23-98.39 60.22-107.2 116.4C224.5 128.9 224.2 137 224.3 145l82.78 82.86C315.2 225.1 323.5 224.1 331.8 224.1zM384 278.6c-23.16-23.16-57.57-27.57-85.39-13.9L191.1 158L191.1 95.99l-127.1-95.99L0 63.1l96 127.1l62.04 .0077l106.7 106.6c-13.67 27.82-9.251 62.23 13.91 85.39l117 117.1c14.62 14.5 38.21 14.5 52.71-.0016l52.75-52.75c14.5-14.5 14.5-38.08-.0016-52.71L384 278.6zM227.9 307L168.7 247.9l-148.9 148.9c-26.37 26.37-26.37 69.08 0 95.45C32.96 505.4 50.21 512 67.5 512s34.54-6.592 47.72-19.78l119.1-119.1C225.5 352.3 222.6 329.4 227.9 307zM64 472c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24S88 434.7 88 448C88 461.3 77.25 472 64 472z"/></svg></div><div><strong>How to fix:</strong> <span id="recommendation-\${this.sanitizeHtmlId(e)}"></span></div></div>\\n \${a?\`\\n <div class="uw-a11y-manual-check"> \\n <label class="uw-a11y-checkbox"> \\n <input type="checkbox" id="check-\${this.sanitizeHtmlId(e)}" \${this.isRuleVerified(e)?"checked":""} \\n onchange="window.uwAccessibilityChecker.toggleRuleVerification('\${this.escapeJavaScript(e)}'); event.stopPropagation();"> \\n <span class="uw-a11y-checkmark"></span>\\n <span class="uw-a11y-check-label">\${this.isRuleVerified(e)?\`All \${t.length} instances manually verified ✓\`:\`Mark all \${t.length} instances as verified\`}</span>\\n </label>\\n </div>\`:""}\\n \${i.detailedInfo&&i.detailedInfo.length>0?\`\\n <button class="uw-a11y-details-toggle" onclick="window.uwAccessibilityChecker.toggleDetails('\${this.escapeJavaScript(e)}'); event.stopPropagation();">Show technical details</button>\\n <div class="uw-a11y-details" id="details-\${this.sanitizeHtmlId(e)}"><div id="detailed-content-\${this.sanitizeHtmlId(e)}">\${this.renderDetailedInfo(i.detailedInfo)}</div></div>\\n \`:""}\\n <div class="issue-meta"><div><strong>Impact:</strong> \${this.escapeHtmlContent(i.impact||"unknown")}\\n \${i.helpUrl?\`<br><a href="\${this.escapeUrl(i.helpUrl)}" target="_blank" class="learn-more">Learn more about this rule</a>\`:""}\\n </div></div>\\n </div>\`}).join("");e.innerHTML=i,Object.keys(n).forEach(e=>{const t=n[e][0],i=this.shadowRoot.getElementById(\`recommendation-\${e}\`);i&&(i.innerHTML=t.recommendation)})},addIssue:function(e,t,n,i,a,o,s,r,l,c){this.issues.push({id:this.issues.length,type:e,title:t,description:n,element:i,recommendation:a,helpUrl:o,impact:s,tags:r||[],detailedInfo:l||[],ruleId:c||t.toLowerCase().replace(/[^a-z0-9]/g,"-")})},announceResults:function(e,t){const n=this.shadowRoot.getElementById("uw-a11y-announcements");if(!n)return;let i="";if(e){const t=e.score;i+=\`Accessibility test complete. Score: \${t} out of 100, rated as \${97>t?90>t?70>t?50>t?"Needs immediate attention":"Fair":"Good":"Very Good":"Excellent"}. \`}const a=t.error+t.warning;0===a?i+="No accessibility violations found. Excellent work!":(i+=\`Found \${a} total issues: \`,t.error>0&&(i+=\`\${t.error} violation\${1===t.error?"":"s"} requiring immediate attention\`),t.warning>0&&(t.error>0&&(i+=" and "),i+=\`\${t.warning} item\${1===t.warning?"":"s"} requiring manual review\`),t.warningChecked>0&&(i+=\`. \${t.warningChecked} item\${1===t.warningChecked?"":"s"} already verified\`),i+=". Navigate through the list below to review each issue."),setTimeout(()=>{n.textContent=i},500)},setFocusToPanel:function(){setTimeout(()=>{const e=this.shadowRoot.getElementById("uw-a11y-panel");e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"nearest"}))},100)},updateIfIssuesVisibility:function(){const e=this.issues.length>0;this.shadowRoot.querySelectorAll(".if-issues").forEach(t=>{t.style.display=e?"":"none"})},displayResults:function(){this.createPanel();const e=this.shadowRoot.getElementById("uw-a11y-summary"),t=this.shadowRoot.getElementById("uw-a11y-results");this.applySavedPosition();const n={error:this.issues.filter(e=>"error"===e.type).length,warning:this.issues.filter(e=>"warning"===e.type&&e.uniqueId).length,warningChecked:this.issues.filter(e=>"warning"===e.type&&e.uniqueId&&this.checkedItems.has(e.uniqueId)).length,info:this.issues.filter(e=>"info"===e.type).length};this.updateIfIssuesVisibility();const i=this.axeResults?this.axeResults.score:null;this.loadFilters(),e.innerHTML=\`\\n \\x3c!-- ARIA live region for screen reader announcements --\\x3e\\n <div id="uw-a11y-announcements" aria-live="polite" aria-atomic="true" class="sr-only"></div>\\n \\n \${i?this.renderScoreDial(i):""}\\n \\n \\x3c!-- Accessible summary section --\\x3e\\n <div role="region" aria-labelledby="uw-a11y-summary-heading">\\n <h3 id="uw-a11y-summary-heading" class="sr-only">Accessibility Test Results Summary</h3>\\n \\n <p><strong>Total Issues Found:</strong> \${this.issues.length}</p>\\n \\n <div style="margin: 8px 0;" role="list" aria-label="Issue breakdown by type">\\n <div role="listitem" class="violationtype">\\n <div class="info-with-tooltip">\\n <span id="count-error" class="uw-a11y-count count-error" aria-label="\${n.error} violations requiring immediate attention">\${n.error}</span> <span class="issue-type-icon type-error">\${this.getIssueTypeIcon("error","summary")}</span>Violations\\n <button class="info-btn" aria-label="What does Violations mean?" aria-describedby="tip-violations">i</button>\\n <span id="tip-violations" class="tooltip" role="tooltip">These are accessibility failures that must be fixed.</span>\\n </div>\\n <button id="toggle-errors" class="filter-toggle" aria-pressed="true" aria-label="Toggle showing violations" onclick="window.uwAccessibilityChecker.toggleFilter('errors')">\\n <svg class="filter-icon icon-eye" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/></svg>\\n <svg class="filter-icon icon-eye-off" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 3l18 18M10.58 10.58A3 3 0 0012 15a3 3 0 002.42-4.42M9.88 4.24A10.94 10.94 0 0112 5c7 0 11 7 11 7a18.94 18.94 0 01-5.06 5.94M6.26 6.26A18.94 18.94 0 001 12s4 7 11 7a10.94 10.94 0 004.24-.88" stroke="currentColor" stroke-width="2"/></svg>\\n </button>\\n </div>\\n <div role="listitem" class="violationtype">\\n <div class="info-with-tooltip">\\n <span id="count-warning" class="uw-a11y-count count-warning" aria-label="\${n.warning} manual review items">\${n.warning}</span> <span class="issue-type-icon type-warning">\${this.getIssueTypeIcon("warning","summary")}</span>Manual Review\\n <button class="info-btn" aria-label="What does Manual Review mean?" aria-describedby="tip-manual">i</button>\\n <span id="tip-manual" class="tooltip" role="tooltip">These items need human verification.</span>\\n </div>\\n <button id="toggle-warnings" class="filter-toggle" aria-pressed="true" aria-label="Toggle showing manual review" onclick="window.uwAccessibilityChecker.toggleFilter('warnings')">\\n <svg class="filter-icon icon-eye" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/></svg>\\n <svg class="filter-icon icon-eye-off" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 3l18 18M10.58 10.58A3 3 0 0012 15a3 3 0 002.42-4.42M9.88 4.24A10.94 10.94 0 0112 5c7 0 11 7 11 7a18.94 18.94 0 01-5.06 5.94M6.26 6.26A18.94 18.94 0 001 12s4 7 11 7a10.94 10.94 0 004.24-.88" stroke="currentColor" stroke-width="2"/></svg>\\n </button>\\n </div>\\n <div role="listitem" class="violationtype">\\n <div class="info-with-tooltip">\\n <span id="count-info" class="uw-a11y-count count-info" aria-label="\${n.info} best-practice suggestions">\${n.info}</span> <span class="issue-type-icon type-info">\${this.getIssueTypeIcon("info","summary")}</span>Best Practices\\n <button class="info-btn" aria-label="What does Best Practices mean?" aria-describedby="tip-best">i</button>\\n <span id="tip-best" class="tooltip" role="tooltip">Suggestions to improve usability and clarity.</span>\\n </div>\\n <button id="toggle-info" class="filter-toggle" aria-pressed="true" aria-label="Toggle showing best practices" onclick="window.uwAccessibilityChecker.toggleFilter('info')">\\n <svg class="filter-icon icon-eye" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/></svg>\\n <svg class="filter-icon icon-eye-off" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 3l18 18M10.58 10.58A3 3 0 0012 15a3 3 0 002.42-4.42M9.88 4.24A10.94 10.94 0 0112 5c7 0 11 7 11 7a18.94 18.94 0 01-5.06 5.94M6.26 6.26A18.94 18.94 0 001 12s4 7 11 7a10.94 10.94 0 004.24-.88" stroke="currentColor" stroke-width="2"/></svg>\\n </button>\\n </div>\\n \${n.warningChecked>0?\`\\n <div role="listitem" class="violationtype">\\n <div>\\n <span id="count-verified" class="uw-a11y-count count-verified" aria-label="\${n.warningChecked} verified items">\${n.warningChecked}</span>Verified\\n <span class="sr-only"> - These manual review items have been checked and confirmed</span>\\n </div>\\n </div>\\n \`:""}\\n </div>\\n </div>\\n \\n \${this.axeResults?\`\\n <div class="axe-summary">\\n <strong>Standard:</strong> \${this.getWcagLabel()}\\n </div>\\n \`:""}\\n \`,this.startResultsScoreAnimation(),this.updateFilterUI(),0===this.issues.length?t.innerHTML=\`\\n <div class="uw-a11y-issue info">\\n <h4>Excellent Accessibility!</h4>\\n <p>No accessibility violations detected by axe-core. Your page meets \${this.getWcagLabel()} automated testing standards.</p>\\n <p><strong>Next Steps:</strong> Consider manual testing with screen readers and keyboard navigation for complete accessibility validation.</p>\\n </div>\\n \`:this.refreshIssueList(),this.announceResults(i,n),this.setFocusToPanel()},createScoreGradient:function(e,t){let n;return n=90>e?70>e?50>e?\`#a71e2a 0deg, #dc3545 \${.3*t}deg, #e55666 \${.6*t}deg, #ee6674 \${t}deg\`:\`#dc6002 0deg, #fd7e14 \${.3*t}deg, #ff8c42 \${.6*t}deg, #ff9a56 \${t}deg\`:\`#e6a800 0deg, #ffc107 \${.3*t}deg, #ffce3a \${.6*t}deg, #ffd96a \${t}deg\`:\`#1e7e34 0deg, #28a745 \${.3*t}deg, #34ce57 \${.6*t}deg, #40d969 \${t}deg\`,\`conic-gradient(from 0deg, \${n}, #e9ecef \${t}deg 360deg)\`},getIssueTypeIcon:function(e,t){const n="issue"===t?"uw-a11y-issue-icon":"",i=e=>e?\`\${n} \${e}\`:n;return"error"===e?\`<svg class="\${i("type-error")}" viewBox="0 0 24 24" width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 9v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 17h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>\`:"warning"===e?\`<svg class="\${i("type-warning")}" viewBox="0 0 512 512" width="18" height="18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill="currentColor" d="M456.69,421.39,362.6,327.3a173.81,173.81,0,0,0,34.84-104.58C397.44,126.38,319.06,48,222.72,48S48,126.38,48,222.72s78.38,174.72,174.72,174.72A173.81,173.81,0,0,0,327.3,362.6l94.09,94.09a25,25,0,0,0,35.3-35.3ZM97.92,222.72a124.8,124.8,0,1,1,124.8,124.8A124.95,124.95,0,0,1,97.92,222.72Z"/></svg>\`:\`<svg class="\${i("type-info")}" viewBox="0 0 24 24" width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 4L12 14.01 9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\`},renderScoreDial:function(e){const t=e.score,n=(this.createScoreGradient(t,t/100*360),97>t?90>t?70>t?50>t?"Immediate attention needed":"Several issues to address":"Fair accessibility with room for improvement":"Very Good - just a few issues to address":"Excellent");return\`\\n <div class="uw-a11y-score-container" role="region" aria-labelledby="uw-a11y-score-heading">\\n <h3 id="uw-a11y-score-heading" class="sr-only">Accessibility Score</h3>\\n \\n \\x3c!-- Screen reader accessible score announcement --\\x3e\\n <div class="sr-only">\\n Accessibility score: \${t} out of 100. Rating: \${n}\\n </div>\\n \\n <div class="uw-a11y-score-dial" role="img" aria-label="Accessibility score \${t} out of 100, rated as \${n}">\\n <div class="uw-a11y-score-circle" style="background: \${this.createScoreGradient(0,0)};">\\n <div class="uw-a11y-score-inner">\\n <div class="uw-a11y-score-number" aria-hidden="true">0</div>\\n <div class="uw-a11y-score-label" aria-hidden="true">Score</div>\\n </div>\\n </div>\\n </div>\\n <div style="font-size: 14px;">\\n <span style="font-size: 12px; color: #666;" aria-hidden="true">\\n \${n}\\n </span>\\n </div>\\n </div>\\n \`},startResultsScoreAnimation:function(){try{if(this.scoreAnimationPlayed)return;if(this.prefersReducedMotion())return void(this.scoreAnimationPlayed=!0);const e=this.axeResults&&this.axeResults.score?this.axeResults.score:null;if(!e)return;const t=Math.max(0,Math.min(100,parseInt(e.score,10)||0)),n=this.shadowRoot.querySelector(".uw-a11y-score-dial"),i=this.shadowRoot.querySelector(".uw-a11y-score-circle"),a=this.shadowRoot.querySelector(".uw-a11y-score-number");if(!i||!a||!n)return;this.scoreAnimationPlayed=!0,a.textContent="0",i.style.background=this.createScoreGradient(0,0),this._scoreTween&&window.gsap&&(this._scoreTween.kill(),this._scoreTween=null);const o=e=>{const t=Math.round(e);n.setAttribute("aria-label",\`Accessibility score \${t} out of 100, rated as \${97>t?90>t?70>t?50>t?"Immediate attention needed":"Fair accessibility - several issues to address":"Good accessibility with room for improvement":"Very Good - just a few issues to address":"Excellent"}\`)},s=t/100*360;if(window.gsap){const e={n:0,deg:0};this._scoreTween=window.gsap.to(e,{n:t,deg:s,duration:1.2,ease:"power2.out",onUpdate:()=>{const t=Math.round(e.n);a.textContent=String(t),i.style.background=this.createScoreGradient(t,e.deg),o(e.n)}})}else{const e=performance.now(),n=1200,r=l=>{const c=Math.min(1,(l-e)/n),d=Math.round(t*c),u=s*c;a.textContent=String(d),i.style.background=this.createScoreGradient(d,u),o(d),1>c&&requestAnimationFrame(r)};requestAnimationFrame(r)}}catch(e){console.warn("Score animation failed:",e)}},renderDetailedInfo:function(e){return e.map(e=>{let t=e.value;return"colors"===e.type&&"object"==typeof t?t=\`\\n <div style="margin: 0.5rem 0;">\\n <div><strong>Foreground:</strong> <span style="background: \${t.foreground}; color: white; padding: 2px 6px; border-radius: 2px;">\${t.foreground}</span></div>\\n <div><strong>Background:</strong> <span style="background: \${t.background}; border: 1px solid #ccc; padding: 2px 6px; border-radius: 2px;">\${t.background}</span></div>\\n <div><strong>Contrast Ratio:</strong> \${t.contrast}</div>\\n <div><strong>Requirement:</strong> \${t.required}</div>\\n </div>\\n \`:"string"==typeof t&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),\`\\n <div class="uw-a11y-details-item">\\n <div class="uw-a11y-details-label">\${e.label}:</div>\\n <div class="uw-a11y-details-value">\${t}</div>\\n </div>\\n \`}).join("")},groupIssuesByRule:function(e){const t={};return e.forEach(e=>{const n=\`\${e.ruleId||\`fallback-\${e.title.toLowerCase().replace(/[^a-z0-9]/g,"-")}-\${e.id}\`}-\${e.type}\`;t[n]||(t[n]=[]),t[n].push(e)}),t},currentInstances:{},navigateInstance:function(e,t){this.currentInstances[e]||(this.currentInstances[e]=0);const n=this.groupIssuesByRule(this.issues)[e];if(!n)return;const i=this.currentInstances[e]+t;i>=0&&n.length>i&&(this.currentInstances[e]=i,this.updateInstanceDisplay(e,n),this.highlightCurrentInstance(e))},updateInstanceDisplay:function(e,t){const n=this.currentInstances[e]||0,i=t[n],a=this.sanitizeHtmlId(e),o=this.shadowRoot.getElementById(\`description-\${a}\`),s=this.shadowRoot.getElementById(\`recommendation-\${a}\`),r=this.shadowRoot.getElementById(\`current-\${a}\`),l=this.shadowRoot.getElementById(\`detailed-content-\${a}\`);o&&(o.textContent=i.description.split("\\n")[0]),s&&(s.innerHTML=i.recommendation),r&&(r.textContent=n+1),l&&i.detailedInfo&&(l.innerHTML=this.renderDetailedInfo(i.detailedInfo));const c=this.shadowRoot.getElementById(\`prev-\${a}\`),d=this.shadowRoot.getElementById(\`next-\${a}\`);c&&(c.disabled=0===n),d&&(d.disabled=n===t.length-1)},highlightCurrentInstance:function(e){document.querySelectorAll(".uw-a11y-highlight").forEach(e=>{e.classList.remove("uw-a11y-highlight")});const t=this.groupIssuesByRule(this.issues)[e];if(!t)return;const n=t[this.currentInstances[e]||0];n.element&&(n.element.classList.add("uw-a11y-highlight"),n.element.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{n.element&&n.element.classList.remove("uw-a11y-highlight")},3e3))},isRuleVerified:function(e){const t=this.groupIssuesByRule(this.issues)[e];return!!t&&t.every(e=>e.uniqueId&&this.checkedItems.has(e.uniqueId))},toggleRuleVerification:function(e){const t=this.groupIssuesByRule(this.issues)[e];if(!t)return;const n=this.isRuleVerified(e);t.forEach(e=>{e.uniqueId&&(n?this.checkedItems.delete(e.uniqueId):this.checkedItems.add(e.uniqueId))});const i=this.sanitizeHtmlId(e),a=this.shadowRoot.getElementById(\`check-\${i}\`),o=a?.parentNode.querySelector(".uw-a11y-check-label"),s=this.shadowRoot.getElementById(\`issue-\${i}\`),r=this.isRuleVerified(e);a&&(a.checked=r),o&&(o.textContent=r?\`All \${t.length} instances manually verified ✓\`:\`Mark all \${t.length} instances as verified\`),s&&(r?s.classList.add("checked"):s.classList.remove("checked")),this.updateScore(),sessionStorage.setItem("uw-a11y-checked",JSON.stringify(Array.from(this.checkedItems)))},toggleDetails:function(e){const t=this.sanitizeHtmlId(e),n=this.shadowRoot.getElementById(\`details-\${t}\`),i=n.previousElementSibling;n.classList.contains("expanded")?(n.classList.remove("expanded"),this.updateButtonText(i,"Show technical details")):(n.classList.add("expanded"),this.updateButtonText(i,"Hide technical details"))},updateButtonText:function(e,t){const n=e.childNodes;for(let e=n.length-1;e>=0;e--){const i=n[e];if(i.nodeType===Node.TEXT_NODE&&i.textContent.trim())return void(i.textContent=t)}e.appendChild(document.createTextNode(t))},toggleManualCheck:function(e){this.checkedItems.has(e)?this.checkedItems.delete(e):this.checkedItems.add(e);const t=this.shadowRoot.getElementById(\`check-\${e}\`),n=t.parentNode.querySelector(".uw-a11y-check-label"),i=t.closest(".uw-a11y-issue");this.checkedItems.has(e)?(n.textContent="Manually verified ✓",i.classList.add("checked")):(n.textContent="Mark as manually verified",i.classList.remove("checked")),this.updateScore(),sessionStorage.setItem("uw-a11y-checked",JSON.stringify(Array.from(this.checkedItems)))},updateScore:function(){if(!this.filteredAxeResults)return;const e=this.calculateAccessibilityScore(this.filteredAxeResults);this.axeResults.score=e;const t=this.shadowRoot.querySelector(".uw-a11y-score-number"),n=this.shadowRoot.querySelector(".uw-a11y-score-circle");if(t&&n){t.textContent=e.score;const i=e.score,a=this.createScoreGradient(i,i/100*360);n.style.background=a}const i={error:this.issues.filter(e=>"error"===e.type).length,warning:this.issues.filter(e=>"warning"===e.type&&e.uniqueId).length,warningChecked:this.issues.filter(e=>"warning"===e.type&&e.uniqueId&&this.checkedItems.has(e.uniqueId)).length,info:this.issues.filter(e=>"info"===e.type).length},a=(e,t)=>{const n=this.shadowRoot.getElementById(e);n&&(n.textContent=t)};a("count-error",i.error),a("count-warning",i.warning),a("count-info",i.info),a("count-verified",i.warningChecked),this.updateIfIssuesVisibility();const o=this.shadowRoot.getElementById("uw-a11y-announcements");if(o&&i.warningChecked>0){o.textContent=\`Score updated to \${e.score}. \${i.warningChecked} item\${1===i.warningChecked?"":"s"} verified.\`}},loadCheckedItems:function(){try{const e=sessionStorage.getItem("uw-a11y-checked");e&&(this.checkedItems=new Set(JSON.parse(e)))}catch(e){console.warn("Could not load checked items from sessionStorage:",e)}},toggleMinimize:function(){const e=this.shadowRoot.getElementById("uw-a11y-panel"),t=this.shadowRoot.getElementById("uw-a11y-minimize");e&&t&&(this.isMinimized=!this.isMinimized,this.isMinimized?(e.classList.add("minimized"),t.textContent="+",t.title="Restore"):(e.classList.remove("minimized"),t.textContent="−",t.title="Minimize",this.setFocusToPanel()),sessionStorage.setItem("uw-a11y-minimized",this.isMinimized))},loadMinimizeState:function(){try{"true"===sessionStorage.getItem("uw-a11y-minimized")&&setTimeout(()=>{this.toggleMinimize()},100)}catch(e){console.warn("Could not load minimize state from sessionStorage:",e)}},checkForUpdates:function(){sessionStorage.getItem("uw-a11y-update-checked")||(sessionStorage.setItem("uw-a11y-update-checked","true"),fetch("https://api.github.com/repos/althe3rd/Pinpoint/releases/latest").then(e=>e.json()).then(e=>{const t=e.tag_name.replace("v","");this.compareVersions(t,this.version)>0&&this.showUpdateNotification(t,e.html_url)}).catch(()=>{}))},compareVersions:function(e,t){const n=e.split(".").map(Number),i=t.split(".").map(Number);for(let e=0;e<Math.max(n.length,i.length);e++){const t=n[e]||0,a=i[e]||0;if(t>a)return 1;if(a>t)return-1}return 0},showUpdateNotification:function(e,t){const n=document.createElement("div");n.id="uw-a11y-update-notification",n.innerHTML=\`\\n <div style="background: #56ab30; color: white; padding: 12px; border-radius: 4px; margin-bottom: 10px; font-size: 13px; position: relative;">\\n <button onclick="this.parentElement.parentElement.style.display='none'" \\n style="position: absolute; top: 8px; right: 8px; background: none; border: none; color: white; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; opacity: 0.8; transition: opacity 0.2s;"\\n onmouseover="this.style.opacity='1'; this.style.backgroundColor='rgba(255,255,255,0.2)'"\\n onmouseout="this.style.opacity='0.8'; this.style.backgroundColor='transparent'">\\n ✕\\n </button>\\n <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">\\n <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">\\n <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>\\n <circle cx="12" cy="12" r="1" fill="currentColor"/>\\n </svg>\\n <h3 style="font-size: 14px; margin: 0; font-weight: 700;">Update Available</h3>\\n </div>\\n <div style="margin-bottom: 8px;">v\${this.version} → v\${e}</div>\\n <div style="display: flex; flex-wrap: wrap; gap: 16px;">\\n <a href="\${t}" target="_blank" style="color: #ffffff; text-decoration: underline; font-size: 12px;">\\n View release notes →\\n </a>\\n <a href="https://althe3rd.github.io/Pinpoint/" target="_blank" style="color: #ffffff; text-decoration: underline; font-size: 12px;">\\n Get latest bookmarklet →\\n </a>\\n </div>\\n </div>\\n \`,setTimeout(()=>{const e=this.shadowRoot?.getElementById("uw-a11y-summary");e&&e.insertBefore(n,e.firstChild)},500)},remove:function(){this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);const e=document.getElementById("uw-a11y-container");e&&e.remove();const t=document.getElementById("uw-a11y-global-styles");t&&t.remove(),document.querySelectorAll(".uw-a11y-highlight").forEach(e=>{e.classList.remove("uw-a11y-highlight")}),delete window.uwAccessibilityChecker},debugShowUpdateNotification:function(){this.showUpdateNotification("1.5.0","https://github.com/althe3rd/Pinpoint/releases/tag/v1.5.0")}},window.uwAccessibilityChecker.init())}();`;
        
        // Set up the bookmarklet link
        document.addEventListener('DOMContentLoaded', function() {
            const bookmarkletLink = document.getElementById('bookmarklet-link');
            bookmarkletLink.href = 'javascript:' + bookmarkletCode;
        });
        
        // Generate bookmarklet code for copy/paste
        function generateBookmarklet() {
            const codeDiv = document.getElementById('bookmarklet-code');
            codeDiv.textContent = 'javascript:' + bookmarkletCode;
            codeDiv.classList.remove('hidden');
            
            // Select the text for easy copying
            const range = document.createRange();
            range.selectNode(codeDiv);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
        }
    </script>
</body>
</html>